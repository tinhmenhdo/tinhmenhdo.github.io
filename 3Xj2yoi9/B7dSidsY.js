import{j as e}from"./CY20i357.js";import{r as t}from"./DgTtEExD.js";import{I as n,h as a}from"./CPzYiWv8.js";import"./CVVDEXDJ.js";const CoinFlipAnimation=({isFlipping:n,onAnimationComplete:a,results:i})=>{const s=t.useRef(null);return t.useEffect((()=>{if(!n||!s.current)return;const e=s.current,t=e.getContext("2d");if(!t)return;const l=.75,o=25,c=i.map(((t,n)=>{const a=e.width/(i.length+1),s=a*(n+1),l=(Math.random()-.5)*(.5*a);return{x:Math.min(Math.max(s+l,50+100*n),e.width-50),y:e.height/2,velocityX:200*(Math.random()-.5),velocityY:-1500*(1+.3*Math.random()),scale:1.8,isSettled:!1,result:t,bounceCount:0,rotationX:0,rotationSpeed:200*(1+.5*Math.random()),maxBounces:2+Math.floor(3*Math.random())}}));let h=performance.now();const r=n=>{const i=(n-h)/1e3;h=n,t.clearRect(0,0,e.width,e.height);let s=!0;c.forEach((n=>{if(!n.isSettled){n.velocityY+=3e3*i,n.y+=n.velocityY*i,n.x+=n.velocityX*i;const t=Math.max(0,(e.height/2-n.y)/(e.height/2));if(n.rotationX+=(n.rotationSpeed+20*t)*i,n.y>350-o*n.scale)if(n.y=350-o*n.scale,n.bounceCount<n.maxBounces){const e=.3*Math.random()-.15+1;n.velocityY=.4*-Math.abs(n.velocityY)*e,n.velocityX*=l*(.2*Math.random()-.1+1),n.bounceCount++,n.rotationSpeed*=l*(.8+.4*Math.random());const t=.2*Math.random()-.1+1;n.scale=(.9+(1.2-.9)*(1-n.bounceCount/n.maxBounces))*t}else n.isSettled=!0,n.scale=1.2,n.velocityX=0,n.velocityY=0,n.rotationSpeed=0,n.rotationX="N"===n.result?0:Math.PI;if(n.x<o*n.scale?(n.x=o*n.scale,n.velocityX=Math.abs(n.velocityX)*l):n.x>e.width-o*n.scale&&(n.x=e.width-o*n.scale,n.velocityX=-Math.abs(n.velocityX)*l),0===n.bounceCount){const t=(n.y-e.height/2)/(.3*e.height);n.scale=.9+.9*(1-Math.min(1,Math.max(0,t)))}s=!1}(n=>{t.save(),t.translate(n.x,n.y);const a=Math.abs(Math.cos(n.rotationX));t.scale(n.scale,n.scale*a);const i=350-n.y,s=Math.max(.1,1-i/(e.height/2));t.beginPath(),t.ellipse(0,i/n.scale,o*s,5,0,0,2*Math.PI),t.fillStyle=`rgba(0, 0, 0, ${.3*s})`,t.fill(),t.beginPath(),t.arc(0,0,o,0,2*Math.PI);const l=Math.cos(n.rotationX)>0,c=l?"#FFD700":"#808080";t.fillStyle=c,t.fill(),t.strokeStyle=l?"#B8860B":"#666666",t.lineWidth=2,t.stroke(),n.isSettled&&(t.beginPath(),t.arc(0,0,20,0,2*Math.PI),t.strokeStyle=l?"#B8860B":"#666666",t.lineWidth=1,t.stroke(),t.fillStyle=l?"#B8860B":"#666666",t.font="bold 20px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(n.result,0,0)),t.restore()})(n)})),c.forEach(((e,t)=>{c.slice(t+1).forEach((t=>{const n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a),s=50*Math.max(e.scale,t.scale);if(i<s){const l=Math.atan2(a,n),o=.5*(s-i);e.isSettled||(e.x-=Math.cos(l)*o,e.velocityX-=Math.cos(l)*o),t.isSettled||(t.x+=Math.cos(l)*o,t.velocityX+=Math.cos(l)*o)}}))})),s?setTimeout(a,500):requestAnimationFrame(r)};requestAnimationFrame(r)}),[n,a,i]),e.jsx("canvas",{ref:s,width:400,height:400,className:"mx-auto"})},GieoQueKinhDich=()=>{const[i,s]=t.useState([]),[l,o]=t.useState(!1),[c,h]=t.useState(null),[r,x]=t.useState(null),m=e=>{const t=[...e].sort(((e,t)=>e.haoNumber-t.haoNumber)).reverse().map((e=>"duong"===e.type||"duongDong"===e.type?"1":("am"===e.type||e.type,"0"))).join(""),i=a.findIndex((e=>e===t));if(-1!==i){const t={queIcon:n[i][0],queTen:n[i][1],queMeaning:n[i][2]},a=(e=>{if(!e.some((e=>"amDong"===e.type||"duongDong"===e.type)))return null;const t=e.map((e=>({...e,type:"amDong"===e.type?"duong":"duongDong"===e.type?"am":e.type,symbol:"amDong"===e.type?"———":"duongDong"===e.type?"— —":e.symbol})));return m(t)})(e);return{...t,queBien:a}}return null},u=[...i].sort(((e,t)=>e.haoNumber-t.haoNumber));return e.jsxs("div",{className:"relative z-10 my-8 mb-96 mt-4 px-5",children:[e.jsxs("h1",{className:"mb-5 mt-10 text-center text-xl font-bold",children:["Gieo quẻ hỏi việc ",(new Date).getFullYear()]}),e.jsxs("div",{className:"mb-5 mt-10",children:[e.jsxs("div",{className:"text-lg",children:[e.jsx("p",{children:"Đây là nơi bạn có thể tìm đến khi đứng trước những băn khoăn chưa có lời giải, hoặc ngay cả khi không rõ mình đang cần điều gì. Qua 64 quẻ Kinh Dịch – hệ thống dự đoán uyên thâm nhất của nhân loại, bạn có thể khám phá những thông điệp sâu sắc, mở ra hướng đi tiềm năng hoặc tìm thấy sự sáng tỏ trong tâm trí."}),e.jsx("p",{className:"my-2",children:"Không cần chuẩn bị không gian đặc biệt, bạn chỉ cần tĩnh tâm, thả lỏng, buông bỏ mọi suy nghĩ và tập trung hoàn toàn vào từng lần tung quẻ. Bạn có thể thực hiện việc này ở bất kỳ đâu, bất kỳ lúc nào. Kinh Dịch không đòi hỏi bạn phải có một câu hỏi cụ thể, mà đôi khi chính những quẻ ngẫu nhiên lại là cách để bạn khám phá những điều chưa từng nghĩ đến, mang đến những góc nhìn mới mẻ cho những vấn đề tiềm ẩn trong cuộc sống."}),e.jsx("p",{children:"Hãy nhớ rằng, tung quẻ không chỉ là để tìm kiếm câu trả lời, mà còn là cách kết nối với dòng chảy tự nhiên của vũ trụ. Tuy nhiên, hãy sử dụng quẻ một cách cân nhắc, tránh việc thực hiện quá nhiều lần liên tiếp để đảm bảo độ chính xác và sự linh ứng. Hãy để mỗi lần tung quẻ là một khoảnh khắc bạn dừng lại, lắng nghe và cảm nhận những chỉ dẫn mà Kinh Dịch dành riêng cho bạn."})]}),e.jsx("div",{className:"text-center my-5 text-lg",children:e.jsx("b",{children:"Ấn vào phần Tung Xu để gieo quẻ (chú ý tung 6 lần)"})}),e.jsx("div",{className:"flex wrap w-full lg:w-[1000px] mx-auto",children:i.length>0&&e.jsxs("div",{className:"mx-auto mt-8 rounded-lg bg-white p-6 shadow-xl lg:w-[1024px]",children:[e.jsx("div",{className:"mb-4 flex flex-col-reverse mx-auto lg:w-[243px]",children:u.map(((t,n)=>e.jsxs("div",{className:"flex items-center relative",children:[e.jsxs("span",{className:"w-16",children:["Hào ",t.haoNumber,":"]}),e.jsx("span",{className:"font-mono w-[90px] text-left text-[32px] leading-[20px] ",children:t.symbol}),e.jsx("div",{className:"flex ml-5 space-x-1",children:t.coins.map(((a,i)=>e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center\n                          "+("N"===a?"bg-yellow-400":"bg-gray-400"),children:a},`${t.id+(new Date).getTime()+n+i}-${a}`)))}),e.jsx("span",{className:"text-gray-600 ml-3 text-xs absolute top-[3px] right-[-10px]",children:t.trangThai})]},t.id+(new Date).getTime()+n)))}),e.jsx("div",{className:"mt-6 border-t pt-4",children:c&&e.jsxs("div",{className:"flex justify-center items-start gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-center text-4xl md:text-6xl lg:text-8xl font-semibold",children:c.queIcon}),e.jsxs("h3",{className:"mb-2 text-center text-2xl font-semibold",children:["Quẻ: ",c.queTen]}),e.jsx("p",{className:"text-gray-700 text-xl",children:c.queMeaning})]}),c.queBien&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-4xl font-bold self-center",children:"→"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-center text-4xl md:text-6xl lg:text-8xl font-semibold",children:c.queBien.queIcon}),e.jsxs("h3",{className:"mb-2 text-center text-2xl font-semibold",children:["Quẻ biến: ",c.queBien.queTen]}),e.jsx("p",{className:"text-gray-700 text-xl",children:c.queBien.queMeaning})]})]})]})})]})}),e.jsx("div",{className:"flex justify-center",children:i.length<6?e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:async()=>{if(l||i.length>=6)return;const e=(e=>{const t=Array(3).fill(null).map((()=>(()=>{const e=new Uint8Array(1);return crypto.getRandomValues(e),e[0]<128?"N":"S"})())),n=t.filter((e=>"N"===e)).length;let a,i,s="";return 3===n?(a="amDong",i="— —",s="(X)"):0===n?(a="duongDong",i="———",s="(O)"):2===n?(a="duong",i="———",s=""):(a="am",i="— —",s=""),{id:e,coins:t,type:a,symbol:i,trangThai:s,haoNumber:e}})(i.length+1);o(!0),x(e)},disabled:l,className:"uppercase fixed bottom-9 left-1/2 -translate-x-1/2 px-2 bg-orange-700 w-[100px] h-[100px] rounded-full text-white\n                  transition-all hover:bg-amber-600 disabled:bg-gray-400 [text-shadow:_1px_1px_1px_rgba(0,0,0,0.5)]\n                  shadow-[inset_-2px_-2px_4px_rgba(0,0,0,0.4),_inset_2px_2px_4px_rgba(255,255,255,0.3),_0_4px_8px_rgba(0,0,0,0.3)]\n                  active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),_inset_-2px_-2px_4px_rgba(255,255,255,0.3)]",children:l?"Đang tung...":`Tung đồng xu (Hào ${i.length+1})`}),l&&r&&e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(CoinFlipAnimation,{isFlipping:l,onAnimationComplete:()=>{if(!r)return;const e=[...i,r];if(s(e),o(!1),x(null),6===e.length){const t=m(e);t&&h({haoResults:e,queIcon:t.queIcon,queTen:t.queTen,queMeaning:t.queMeaning,queBien:t.queBien})}},results:r.coins})})]}):e.jsx("button",{type:"button",onClick:()=>{s([]),h(null)},className:"uppercase fixed bottom-9 right-10 -translate-x-1/2 px-2 bg-orange-700 w-[100px] h-[100px] rounded-full text-white\n                  transition-all hover:bg-amber-600 disabled:bg-gray-400 [text-shadow:_1px_1px_1px_rgba(0,0,0,0.5)]\n                  shadow-[inset_-2px_-2px_4px_rgba(0,0,0,0.4),_inset_2px_2px_4px_rgba(255,255,255,0.3),_0_4px_8px_rgba(0,0,0,0.3)]\n                  active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),_inset_-2px_-2px_4px_rgba(255,255,255,0.3)]",children:"Gieo quẻ mới"})})]})]})};export{GieoQueKinhDich as default};