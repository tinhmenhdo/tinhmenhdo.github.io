import{j as joinPaths,D as DEFAULT_OUTPUT_FORMAT,i as isRemotePath,k as VALID_SUPPORTED_FORMATS,l as DEFAULT_HASH_PROPS}from"./hp21E7cv.js";import{A as AstroError,E as ExpectedImage,L as LocalImageUsedWrongly,M as MissingImageDimension,y as UnsupportedImageFormat,I as IncompatibleDescriptorOptions,z as UnsupportedImageConversion,B as toStyleString,C as NoImageMetadata,D as FailedToFetchRemoteImageDimensions,G as ExpectedImageOptions,H as ExpectedNotESMImage,J as InvalidImageService,d as createAstro,c as createComponent,K as ImageMissingAlt,m as maybeRenderHead,b as addAttribute,s as spreadAttributes,a as renderTemplate,O as ExperimentalFontsNotEnabled,P as FontFamilyNotFound,u as unescapeHTML}from"./BLPCCYJH.js";import*as mime from"mrmime";import"clsx";import"kleur/colors";const DEFAULT_RESOLUTIONS=[640,750,828,960,1080,1280,1668,1920,2048,2560,3200,3840,4480,5120,6016],LIMITED_RESOLUTIONS=[640,750,828,1080,1280,1668,2048,2560],getWidths=({width:t,layout:e,breakpoints:r=DEFAULT_RESOLUTIONS,originalWidth:i})=>{const a=t=>!i||t<=i;if("full-width"===e)return r.filter(a);if(!t)return[];const n=2*t,s=i?Math.min(n,i):n;return"fixed"===e?i&&t>i?[i]:[t,s]:"constrained"===e?[t,n,...r].filter((t=>t<=s)).sort(((t,e)=>t-e)):[]},getSizesAttribute=({width:t,layout:e})=>{if(t&&e)switch(e){case"constrained":return`(min-width: ${t}px) ${t}px, 100vw`;case"fixed":return`${t}px`;case"full-width":return"100vw";default:return}};function matchPattern(t,e){return matchProtocol(t,e.protocol)&&matchHostname(t,e.hostname,!0)&&matchPort(t,e.port)&&matchPathname(t,e.pathname,!0)}function matchPort(t,e){return!e||e===t.port}function matchProtocol(t,e){return!e||e===t.protocol.slice(0,-1)}function matchHostname(t,e,r=!1){if(!e)return!0;if(!r||!e.startsWith("*"))return e===t.hostname;if(e.startsWith("**.")){const r=e.slice(2);return r!==t.hostname&&t.hostname.endsWith(r)}if(e.startsWith("*.")){const r=e.slice(1);return 1===t.hostname.replace(r,"").split(".").filter(Boolean).length}return!1}function matchPathname(t,e,r=!1){if(!e)return!0;if(!r||!e.endsWith("*"))return e===t.pathname;if(e.endsWith("/**")){const r=e.slice(0,-2);return r!==t.pathname&&t.pathname.startsWith(r)}if(e.endsWith("/*")){const r=e.slice(0,-1);return 1===t.pathname.replace(r,"").split("/").filter(Boolean).length}return!1}function isRemoteAllowed(t,{domains:e,remotePatterns:r}){if(!URL.canParse(t))return!1;const i=new URL(t);return e.some((t=>matchHostname(i,t)))||r.some((t=>matchPattern(i,t)))}function isESMImportedImage(t){return"object"==typeof t||"function"==typeof t&&"src"in t}function isRemoteImage(t){return"string"==typeof t}async function resolveSrc(t){if("object"==typeof t&&"then"in t){const e=await t;return e.default??e}return t}function isLocalService(t){return!!t&&"transform"in t}function parseQuality(t){let e=parseInt(t);return Number.isNaN(e)?t:e}const sortNumeric=(t,e)=>t-e,baseService={validateOptions(t){if(!t.src||!isRemoteImage(t.src)&&!isESMImportedImage(t.src))throw new AstroError({...ExpectedImage,message:ExpectedImage.message(JSON.stringify(t.src),typeof t.src,JSON.stringify(t,((t,e)=>void 0===e?null:e)))});if(isESMImportedImage(t.src)){if(!VALID_SUPPORTED_FORMATS.includes(t.src.format))throw new AstroError({...UnsupportedImageFormat,message:UnsupportedImageFormat.message(t.src.format,t.src.src,VALID_SUPPORTED_FORMATS)});if(t.widths&&t.densities)throw new AstroError(IncompatibleDescriptorOptions);if("svg"===t.src.format&&(t.format="svg"),"svg"===t.src.format&&"svg"!==t.format||"svg"!==t.src.format&&"svg"===t.format)throw new AstroError(UnsupportedImageConversion)}else{if(t.src.startsWith("/@fs/")||!isRemotePath(t.src)&&!t.src.startsWith("/"))throw new AstroError({...LocalImageUsedWrongly,message:LocalImageUsedWrongly.message(t.src)});let e;if(t.width||t.height?!t.width&&t.height?e="width":t.width&&!t.height&&(e="height"):e="both",e)throw new AstroError({...MissingImageDimension,message:MissingImageDimension.message(e,t.src)})}return t.format||(t.format=DEFAULT_OUTPUT_FORMAT),t.width&&(t.width=Math.round(t.width)),t.height&&(t.height=Math.round(t.height)),t.layout&&t.width&&t.height&&(t.fit??="cover",delete t.layout),"none"===t.fit&&delete t.fit,t},getHTMLAttributes(t){const{targetWidth:e,targetHeight:r}=getTargetDimensions(t),{src:i,width:a,height:n,format:s,quality:o,densities:c,widths:d,formats:h,layout:g,priority:l,fit:m,position:f,...u}=t;return{...u,width:e,height:r,loading:u.loading??"lazy",decoding:u.decoding??"async"}},getSrcSet(t){const{targetWidth:e,targetHeight:r}=getTargetDimensions(t),i=e/r,{widths:a,densities:n}=t,s=t.format??DEFAULT_OUTPUT_FORMAT;let o=(a??[]).sort(sortNumeric),c=t.width,d=1/0;isESMImportedImage(t.src)&&(c=t.src.width,d=c,o.length>0&&o.at(-1)>d&&(o=o.filter((t=>t<=d)),o.push(d))),o=Array.from(new Set(o));const{width:h,height:g,...l}=t;let m=[];if(n){const t=n.map((t=>"number"==typeof t?t:parseFloat(t)));m=t.sort(sortNumeric).map((t=>Math.round(e*t))).map(((e,r)=>({width:e,descriptor:`${t[r]}x`})))}else o.length>0&&(m=o.map((t=>({width:t,descriptor:`${t}w`}))));return m.map((({width:t,descriptor:e})=>{const r=Math.round(t/i);return{transform:{...l,width:t,height:r},descriptor:e,attributes:{type:`image/${s}`}}}))},getURL(t,e){const r=new URLSearchParams;if(isESMImportedImage(t.src))r.append("href",t.src.src);else{if(!isRemoteAllowed(t.src,e))return t.src;r.append("href",t.src)}Object.entries({w:"width",h:"height",q:"quality",f:"format",fit:"fit",position:"position"}).forEach((([e,i])=>{t[i]&&r.append(e,t[i].toString())}));return`${joinPaths("/",e.endpoint.route)}?${r}`},parseURL(t){const e=t.searchParams;if(!e.has("href"))return;return{src:e.get("href"),width:e.has("w")?parseInt(e.get("w")):void 0,height:e.has("h")?parseInt(e.get("h")):void 0,format:e.get("f"),quality:e.get("q"),fit:e.get("fit"),position:e.get("position")??void 0}}};function getTargetDimensions(t){let e=t.width,r=t.height;if(isESMImportedImage(t.src)){const i=t.src.width/t.src.height;r&&!e?e=Math.round(r*i):e&&!r?r=Math.round(e/i):e||r||(e=t.src.width,r=t.src.height)}return{targetWidth:e,targetHeight:r}}function isImageMetadata(t){return t.fsPath&&!("fsPath"in t)}const cssFitValues=["fill","contain","cover","scale-down"];function addCSSVarsToStyle(t,e){const r=Object.entries(t).filter((([t,e])=>void 0!==e&&!1!==e)).map((([t,e])=>`--${t}: ${e};`)).join(" ");if(!e)return r;return`${r} ${"string"==typeof e?e:toStyleString(e)}`}const decoder=new TextDecoder,toUTF8String=(t,e=0,r=t.length)=>decoder.decode(t.slice(e,r)),toHexString=(t,e=0,r=t.length)=>t.slice(e,r).reduce(((t,e)=>t+("0"+e.toString(16)).slice(-2)),""),readInt16LE=(t,e=0)=>{const r=t[e]+256*t[e+1];return r|131070*(32768&r)},readUInt16BE=(t,e=0)=>256*t[e]+t[e+1],readUInt16LE=(t,e=0)=>t[e]+256*t[e+1],readUInt24LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2],readInt32LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+(t[e+3]<<24),readUInt32BE=(t,e=0)=>t[e]*2**24+65536*t[e+1]+256*t[e+2]+t[e+3],readUInt32LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+t[e+3]*2**24,methods={readUInt16BE:readUInt16BE,readUInt16LE:readUInt16LE,readUInt32BE:readUInt32BE,readUInt32LE:readUInt32LE};function readUInt(t,e,r,i){r=r||0;return methods["readUInt"+e+(i?"BE":"LE")](t,r)}function readBox(t,e){if(t.length-e<4)return;const r=readUInt32BE(t,e);return t.length-e<r?void 0:{name:toUTF8String(t,4+e,8+e),offset:e,size:r}}function findBox(t,e,r){for(;r<t.length;){const i=readBox(t,r);if(!i)break;if(i.name===e)return i;r+=i.size}}const BMP={validate:t=>"BM"===toUTF8String(t,0,2),calculate:t=>({height:Math.abs(readInt32LE(t,22)),width:readUInt32LE(t,18)})},TYPE_ICON=1,SIZE_HEADER$1=6,SIZE_IMAGE_ENTRY=16;function getSizeFromOffset(t,e){const r=t[e];return 0===r?256:r}function getImageSize$1(t,e){const r=6+16*e;return{height:getSizeFromOffset(t,r+1),width:getSizeFromOffset(t,r)}}const ICO={validate(t){const e=readUInt16LE(t,0),r=readUInt16LE(t,4);if(0!==e||0===r)return!1;return 1===readUInt16LE(t,2)},calculate(t){const e=readUInt16LE(t,4),r=getImageSize$1(t,0);if(1===e)return r;const i=[r];for(let r=1;r<e;r+=1)i.push(getImageSize$1(t,r));return{height:r.height,images:i,width:r.width}}},TYPE_CURSOR=2,CUR={validate(t){const e=readUInt16LE(t,0),r=readUInt16LE(t,4);if(0!==e||0===r)return!1;return 2===readUInt16LE(t,2)},calculate:t=>ICO.calculate(t)},DDS={validate:t=>542327876===readUInt32LE(t,0),calculate:t=>({height:readUInt32LE(t,12),width:readUInt32LE(t,16)})},gifRegexp=/^GIF8[79]a/,GIF={validate:t=>gifRegexp.test(toUTF8String(t,0,6)),calculate:t=>({height:readUInt16LE(t,8),width:readUInt16LE(t,6)})},brandMap={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};function detectBrands(t,e,r){let i={};for(let a=e;a<=r;a+=4){const e=toUTF8String(t,a,a+4);e in brandMap&&(i[e]=1)}return"avif"in i?"avif":"heic"in i||"heix"in i||"hevc"in i||"hevx"in i?"heic":"mif1"in i||"msf1"in i?"heif":void 0}const HEIF={validate(t){const e=toUTF8String(t,4,8),r=toUTF8String(t,8,12);return"ftyp"===e&&r in brandMap},calculate(t){const e=findBox(t,"meta",0),r=e&&findBox(t,"iprp",e.offset+12),i=r&&findBox(t,"ipco",r.offset+8),a=i&&findBox(t,"ispe",i.offset+8);if(a)return{height:readUInt32BE(t,a.offset+16),width:readUInt32BE(t,a.offset+12),type:detectBrands(t,8,e.offset)};throw new TypeError("Invalid HEIF, no size found")}},SIZE_HEADER=8,FILE_LENGTH_OFFSET=4,ENTRY_LENGTH_OFFSET=4,ICON_TYPE_SIZE={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function readImageHeader(t,e){const r=e+4;return[toUTF8String(t,e,r),readUInt32BE(t,r)]}function getImageSize(t){const e=ICON_TYPE_SIZE[t];return{width:e,height:e,type:t}}const ICNS={validate:t=>"icns"===toUTF8String(t,0,4),calculate(t){const e=t.length,r=readUInt32BE(t,4);let i=8,a=readImageHeader(t,i),n=getImageSize(a[0]);if(i+=a[1],i===r)return n;const s={height:n.height,images:[n],width:n.width};for(;i<r&&i<e;)a=readImageHeader(t,i),n=getImageSize(a[0]),i+=a[1],s.images.push(n);return s}},J2C={validate:t=>"ff4fff51"===toHexString(t,0,4),calculate:t=>({height:readUInt32BE(t,12),width:readUInt32BE(t,8)})},JP2={validate(t){if(1783636e3!==readUInt32BE(t,4)||readUInt32BE(t,0)<1)return!1;const e=findBox(t,"ftyp",0);return!!e&&1718909296===readUInt32BE(t,e.offset+4)},calculate(t){const e=findBox(t,"jp2h",0),r=e&&findBox(t,"ihdr",e.offset+8);if(r)return{height:readUInt32BE(t,r.offset+8),width:readUInt32BE(t,r.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},EXIF_MARKER="45786966",APP1_DATA_SIZE_BYTES=2,EXIF_HEADER_BYTES=6,TIFF_BYTE_ALIGN_BYTES=2,BIG_ENDIAN_BYTE_ALIGN="4d4d",LITTLE_ENDIAN_BYTE_ALIGN="4949",IDF_ENTRY_BYTES=12,NUM_DIRECTORY_ENTRIES_BYTES=2;function isEXIF(t){return"45786966"===toHexString(t,2,6)}function extractSize(t,e){return{height:readUInt16BE(t,e),width:readUInt16BE(t,e+2)}}function extractOrientation(t,e){const r=readUInt(t,16,14,e);for(let i=0;i<r;i++){const r=16+12*i,a=r+12;if(r>t.length)return;const n=t.slice(r,a);if(274===readUInt(n,16,0,e)){if(3!==readUInt(n,16,2,e))return;if(1!==readUInt(n,32,4,e))return;return readUInt(n,16,8,e)}}}function validateExifBlock(t,e){const r=t.slice(2,e),i=toHexString(r,6,8),a="4d4d"===i;if(a||"4949"===i)return extractOrientation(r,a)}function validateInput(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}const JPG={validate:t=>"ffd8"===toHexString(t,0,2),calculate(t){let e,r;for(t=t.slice(4);t.length;){const i=readUInt16BE(t,0);if(255===t[i]){if(isEXIF(t)&&(e=validateExifBlock(t,i)),validateInput(t,i),r=t[i+1],192===r||193===r||194===r){const r=extractSize(t,i+5);return e?{height:r.height,orientation:e,width:r.width}:r}t=t.slice(i+2)}else t=t.slice(i)}throw new TypeError("Invalid JPG, no size found")}},KTX={validate:t=>{const e=toUTF8String(t,1,7);return["KTX 11","KTX 20"].includes(e)},calculate:t=>{const e=49===t[5]?"ktx":"ktx2",r="ktx"===e?36:20;return{height:readUInt32LE(t,r+4),width:readUInt32LE(t,r),type:e}}},pngSignature="PNG\r\n\n",pngImageHeaderChunkName="IHDR",pngFriedChunkName="CgBI",PNG={validate(t){if("PNG\r\n\n"===toUTF8String(t,1,8)){let e=toUTF8String(t,12,16);if("CgBI"===e&&(e=toUTF8String(t,28,32)),"IHDR"!==e)throw new TypeError("Invalid PNG");return!0}return!1},calculate:t=>"CgBI"===toUTF8String(t,12,16)?{height:readUInt32BE(t,36),width:readUInt32BE(t,32)}:{height:readUInt32BE(t,20),width:readUInt32BE(t,16)}},PNMTypes={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},handlers={default:t=>{let e=[];for(;t.length>0;){const r=t.shift();if("#"!==r[0]){e=r.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const r=t.shift();if(r.length>16||r.charCodeAt(0)>128)continue;const[i,a]=r.split(" ");if(i&&a&&(e[i.toLowerCase()]=parseInt(a,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}},PNM={validate:t=>toUTF8String(t,0,2)in PNMTypes,calculate(t){const e=toUTF8String(t,0,2),r=PNMTypes[e],i=toUTF8String(t,3).split(/[\r\n]+/);return(handlers[r]||handlers.default)(i)}},PSD={validate:t=>"8BPS"===toUTF8String(t,0,4),calculate:t=>({height:readUInt32BE(t,14),width:readUInt32BE(t,18)})},svgReg=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,extractorRegExps={height:/\sheight=(['"])([^%]+?)\1/,root:svgReg,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},INCH_CM=2.54,units={in:96,cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72,px:1},unitsReg=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(units).join("|")})?$`);function parseLength(t){const e=unitsReg.exec(t);if(e)return Math.round(Number(e[1])*(units[e[2]]||1))}function parseViewbox(t){const e=t.split(" ");return{height:parseLength(e[3]),width:parseLength(e[2])}}function parseAttributes(t){const e=extractorRegExps.width.exec(t),r=extractorRegExps.height.exec(t),i=extractorRegExps.viewbox.exec(t);return{height:r&&parseLength(r[2]),viewbox:i&&parseViewbox(i[2]),width:e&&parseLength(e[2])}}function calculateByDimensions(t){return{height:t.height,width:t.width}}function calculateByViewbox(t,e){const r=e.width/e.height;return t.width?{height:Math.floor(t.width/r),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*r)}:{height:e.height,width:e.width}}const SVG={validate:t=>svgReg.test(toUTF8String(t,0,1e3)),calculate(t){const e=extractorRegExps.root.exec(toUTF8String(t));if(e){const t=parseAttributes(e[0]);if(t.width&&t.height)return calculateByDimensions(t);if(t.viewbox)return calculateByViewbox(t,t.viewbox)}throw new TypeError("Invalid SVG")}},TGA={validate:t=>0===readUInt16LE(t,0)&&0===readUInt16LE(t,4),calculate:t=>({height:readUInt16LE(t,14),width:readUInt16LE(t,12)})};function readIFD(t,e){const r=readUInt(t,32,4,e);return t.slice(r+2)}function readValue(t,e){const r=readUInt(t,16,8,e);return(readUInt(t,16,10,e)<<16)+r}function nextTag(t){if(t.length>24)return t.slice(12)}function extractTags(t,e){const r={};let i=t;for(;i&&i.length;){const t=readUInt(i,16,0,e),a=readUInt(i,16,2,e),n=readUInt(i,32,4,e);if(0===t)break;1!==n||3!==a&&4!==a||(r[t]=readValue(i,e)),i=nextTag(i)}return r}function determineEndianness(t){const e=toUTF8String(t,0,2);return"II"===e?"LE":"MM"===e?"BE":void 0}const signatures=["49492a00","4d4d002a"],TIFF={validate:t=>signatures.includes(toHexString(t,0,4)),calculate(t){const e="BE"===determineEndianness(t),r=extractTags(readIFD(t,e),e),i=r[256],a=r[257];if(!i||!a)throw new TypeError("Invalid Tiff. Missing tags");return{height:a,width:i}}};function calculateExtended(t){return{height:1+readUInt24LE(t,7),width:1+readUInt24LE(t,4)}}function calculateLossless(t){return{height:1+((15&t[4])<<10|t[3]<<2|(192&t[2])>>6),width:1+((63&t[2])<<8|t[1])}}function calculateLossy(t){return{height:16383&readInt16LE(t,8),width:16383&readInt16LE(t,6)}}const WEBP={validate(t){const e="RIFF"===toUTF8String(t,0,4),r="WEBP"===toUTF8String(t,8,12),i="VP8"===toUTF8String(t,12,15);return e&&r&&i},calculate(t){const e=toUTF8String(t,12,16);if(t=t.slice(20,30),"VP8X"===e){const e=t[0];if(!(192&e)&&!(1&e))return calculateExtended(t);throw new TypeError("Invalid WebP")}if("VP8 "===e&&47!==t[0])return calculateLossy(t);const r=toHexString(t,3,6);if("VP8L"===e&&"9d012a"!==r)return calculateLossless(t);throw new TypeError("Invalid WebP")}},typeHandlers=new Map([["bmp",BMP],["cur",CUR],["dds",DDS],["gif",GIF],["heif",HEIF],["icns",ICNS],["ico",ICO],["j2c",J2C],["jp2",JP2],["jpg",JPG],["ktx",KTX],["png",PNG],["pnm",PNM],["psd",PSD],["svg",SVG],["tga",TGA],["tiff",TIFF],["webp",WEBP]]),types=Array.from(typeHandlers.keys()),firstBytes=new Map([[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);function detector(t){const e=t[0],r=firstBytes.get(e);return r&&typeHandlers.get(r).validate(t)?r:types.find((e=>typeHandlers.get(e).validate(t)))}function lookup(t){const e=detector(t);if(void 0!==e){const r=typeHandlers.get(e).calculate(t);if(void 0!==r)return r.type=r.type??e,r}throw new TypeError("unsupported file type: "+e)}async function imageMetadata(t,e){let r;try{r=lookup(t)}catch{throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(e)})}if(!r.height||!r.width||!r.type)throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(e)});const{width:i,height:a,type:n,orientation:s}=r,o=(s||0)>=5;return{width:o?a:i,height:o?i:a,format:n,orientation:s}}async function inferRemoteSize(t){const e=await fetch(t);if(!e.body||!e.ok)throw new AstroError({...FailedToFetchRemoteImageDimensions,message:FailedToFetchRemoteImageDimensions.message(t)});const r=e.body.getReader();let i,a,n=new Uint8Array;for(;!i;){const e=await r.read();if(i=e.done,i)break;if(e.value){a=e.value;let i=new Uint8Array(n.length+a.length);i.set(n,0),i.set(a,n.length),n=i;try{const e=await imageMetadata(n,t);if(e)return await r.cancel(),e}catch{}}}throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(t)})}async function getConfiguredImageService(){if(!globalThis?.astroAsset?.imageService){const{default:t}=await import("./8FG041YR.js").catch((t=>{const e=new AstroError(InvalidImageService);throw e.cause=t,e}));return globalThis.astroAsset||(globalThis.astroAsset={}),globalThis.astroAsset.imageService=t,t}return globalThis.astroAsset.imageService}async function getImage$1(t,e){if(!t||"object"!=typeof t)throw new AstroError({...ExpectedImageOptions,message:ExpectedImageOptions.message(JSON.stringify(t))});if(void 0===t.src)throw new AstroError({...ExpectedImage,message:ExpectedImage.message(t.src,"undefined",JSON.stringify(t))});if(isImageMetadata(t))throw new AstroError(ExpectedNotESMImage);const r=await getConfiguredImageService(),i={...t,src:await resolveSrc(t.src)};let a,n,s;if(t.inferSize&&isRemoteImage(i.src)&&isRemotePath(i.src)){const t=await inferRemoteSize(i.src);i.width??=t.width,i.height??=t.height,a=t.width,n=t.height,s=t.format,delete i.inferSize}const o=isESMImportedImage(i.src)?i.src.fsPath:void 0,c=isESMImportedImage(i.src)?i.src.clone??i.src:i.src;if(isESMImportedImage(c)&&(a=c.width,n=c.height,s=c.format),a&&n){const t=a/n;i.height&&!i.width?i.width=Math.round(i.height*t):i.width&&!i.height?i.height=Math.round(i.width/t):i.width||i.height||(i.width=a,i.height=n)}i.src=c;const d=t.layout??e.experimentalLayout;e.experimentalResponsiveImages&&d&&(i.widths||=getWidths({width:i.width,layout:d,originalWidth:a,breakpoints:e.experimentalBreakpoints?.length?e.experimentalBreakpoints:isLocalService(r)?LIMITED_RESOLUTIONS:DEFAULT_RESOLUTIONS}),i.sizes||=getSizesAttribute({width:i.width,layout:d}),i.priority?(i.loading??="eager",i.decoding??="sync",i.fetchpriority??="high"):(i.loading??="lazy",i.decoding??="async",i.fetchpriority??="auto"),delete i.priority,delete i.densities,"none"!==d&&(i.style=addCSSVarsToStyle({fit:cssFitValues.includes(i.fit??"")&&i.fit,pos:i.position},i.style),i["data-astro-image"]=d));const h=r.validateOptions?await r.validateOptions(i,e):i,g=r.getSrcSet?await r.getSrcSet(h,e):[];let l=await r.getURL(h,e);const m=t=>t.width===a&&t.height===n&&t.format===s;let f=await Promise.all(g.map((async t=>({transform:t.transform,url:m(t.transform)?l:await r.getURL(t.transform,e),descriptor:t.descriptor,attributes:t.attributes}))));if(isLocalService(r)&&globalThis.astroAsset.addStaticImage&&(!isRemoteImage(h.src)||l!==h.src)){const t=r.propertiesToHash??DEFAULT_HASH_PROPS;l=globalThis.astroAsset.addStaticImage(h,t,o),f=g.map((e=>({transform:e.transform,url:m(e.transform)?l:globalThis.astroAsset.addStaticImage(e.transform,t,o),descriptor:e.descriptor,attributes:e.attributes})))}return{rawOptions:i,options:h,src:l,srcSet:{values:f,attribute:f.map((t=>`${t.url} ${t.descriptor}`)).join(", ")},attributes:void 0!==r.getHTMLAttributes?await r.getHTMLAttributes(h,e):{}}}const $$Astro$2=createAstro("https://tinhmenhdo.com"),$$Image=createComponent((async(t,e,r)=>{const i=t.createAstro($$Astro$2,e,r);i.self=$$Image;const a=i.props;if(void 0===a.alt||null===a.alt)throw new AstroError(ImageMissingAlt);"string"==typeof a.width&&(a.width=parseInt(a.width)),"string"==typeof a.height&&(a.height=parseInt(a.height));const n=a.layout??imageConfig.experimentalLayout??"none";imageConfig.experimentalResponsiveImages&&"none"!==n&&(a.layout??=imageConfig.experimentalLayout,a.fit??=imageConfig.experimentalObjectFit??"cover",a.position??=imageConfig.experimentalObjectPosition??"center");const s=await getImage(a),o={};s.srcSet.values.length>0&&(o.srcset=s.srcSet.attribute);const{class:c,...d}={...o,...s.attributes};return renderTemplate`${maybeRenderHead()}<img${addAttribute(s.src,"src")}${spreadAttributes(d)}${addAttribute(c,"class")}>`}),"/root/code/tmd_astro/node_modules/astro/components/Image.astro",void 0),$$Astro$1=createAstro("https://tinhmenhdo.com"),$$Picture=createComponent((async(t,e,r)=>{const i=t.createAstro($$Astro$1,e,r);i.self=$$Picture;const a=["webp"],{formats:n=a,pictureAttributes:s={},fallbackFormat:o,...c}=i.props;if(void 0===c.alt||null===c.alt)throw new AstroError(ImageMissingAlt);const d=c.class?.match(/\bastro-\w{8}\b/)?.[0];d&&(s.class?s.class=`${s.class} ${d}`:s.class=d);const h=c.layout??imageConfig.experimentalLayout??"none",g=imageConfig.experimentalResponsiveImages&&"none"!==h;g&&(c.layout??=imageConfig.experimentalLayout,c.fit??=imageConfig.experimentalObjectFit??"cover",c.position??=imageConfig.experimentalObjectPosition??"center");for(const t in c)t.startsWith("data-astro-cid")&&(s[t]=c[t]);const l=await resolveSrc(c.src),m=await Promise.all(n.map((async t=>await getImage({...c,src:l,format:t,widths:c.widths,densities:c.densities}))));let f=o??"png";!o&&isESMImportedImage(l)&&["gif","svg","jpg","jpeg"].includes(l.format)&&(f=l.format);const u=await getImage({...c,format:f,widths:c.widths,densities:c.densities}),p={},I={};c.sizes&&(I.sizes=c.sizes),u.srcSet.values.length>0&&(p.srcset=u.srcSet.attribute);const{class:w,...E}={...p,...u.attributes};return renderTemplate`${maybeRenderHead()}<picture${spreadAttributes(s)}> ${Object.entries(m).map((([t,e])=>{const r=c.densities||!c.densities&&!c.widths&&!g?`${e.src}${e.srcSet.values.length>0?", "+e.srcSet.attribute:""}`:e.srcSet.attribute;return renderTemplate`<source${addAttribute(r,"srcset")}${addAttribute(mime.lookup(e.options.format??e.src)??`image/${e.options.format}`,"type")}${spreadAttributes(I)}>`}))}  <img${addAttribute(u.src,"src")}${spreadAttributes(E)}${addAttribute(w,"class")}> </picture>`}),"/root/code/tmd_astro/node_modules/astro/components/Picture.astro",void 0),mod=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$$Astro=createAstro("https://tinhmenhdo.com"),$$Font=createComponent(((t,e,r)=>{const i=t.createAstro($$Astro,e,r);i.self=$$Font;const{fontsData:a}=mod;if(!a)throw new AstroError(ExperimentalFontsNotEnabled);const{cssVariable:n,preload:s=!1}=i.props,o=a.get(n);if(!o)throw new AstroError({...FontFamilyNotFound,message:FontFamilyNotFound.message(n)});return renderTemplate`${s&&o.preloadData.map((({url:t,type:e})=>renderTemplate`<link rel="preload"${addAttribute(t,"href")} as="font"${addAttribute(`font/${e}`,"type")} crossorigin>`))}<style>${unescapeHTML(o.css)}</style>`}),"/root/code/tmd_astro/node_modules/astro/components/Font.astro",void 0),imageConfig={endpoint:{route:"/_image/"},service:{entrypoint:"astro/assets/services/sharp",config:{assetFileNames:"[name][extname]"}},domains:["cdn.pixabay.com"],remotePatterns:[],experimentalDefaultStyles:!1,experimentalResponsiveImages:!0},getImage=async t=>await getImage$1(t,imageConfig),_astro_assets=Object.freeze(Object.defineProperty({__proto__:null,Image:$$Image,getConfiguredImageService:getConfiguredImageService,getImage:getImage,imageConfig:imageConfig,inferRemoteSize:inferRemoteSize,isLocalService:isLocalService},Symbol.toStringTag,{value:"Module"}));export{$$Image as $,_astro_assets as _,baseService as b,getImage as g,parseQuality as p};