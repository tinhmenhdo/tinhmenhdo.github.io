import{j as e}from"./C2QZIOQO.js";import{r as o}from"./mSt8MfY5.js";import{C as _,a as j,b as H,c as f,L as C,d as v,e as I}from"./Dseo2fP7.js";import{c as D}from"./CV2G76of.js";import"./Cpj98o6Y.js";const k=["https://worldtimeapi.org/api/timezone/Asia/Ho_Chi_Minh","https://api.weatherapi.com/v1/timezone.json?key=0155aa8ee0e3416ab5851326241611&q=Ho_Chi_Minh","https://timeapi.io/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://www.timeapi.io/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://www.timeapi.dev/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://api.sunrise-sunset.org/json?lat=10.8231&lng=106.6297&formatted=0",{url:"https://time.vuquyettam.workers.dev",noCors:!0}],z=(s,n)=>{try{return n.includes("weatherapi")?new Date(s.location.localtime):n.includes("worldtimeapi")?new Date(s.datetime):n.includes("timeapi.io")||n.includes("timeapi.dev")?new Date(s.dateTime):n.includes("sunrise-sunset")?new Date(s.results.solar_noon):n.includes("vuquyettam")?new Date(s.timestamp):null}catch{return null}},h=o.memo(({label:s,time:n,lunarTime:l,can:c,chi:m,lthg:d})=>e.jsxs("div",{className:"py-5 bg-black/55 rounded-xl",children:[e.jsx("div",{className:"font-bold uppercase text-white/40",children:s}),e.jsx("time",{className:"font-bold uppercase text-orange-200 text-[1.15em] max-md:text-[1.2em]",children:n}),e.jsx("div",{className:"font-bold uppercase",children:l?e.jsx("span",{className:"px-3 text-gray-500 bg-white/80 rounded-2xl",children:l}):e.jsx("span",{className:"text-gray-500",children:" "})}),e.jsx("div",{className:`font-bold uppercase color${_[c]}`,children:j[c]}),e.jsx("div",{className:`font-bold uppercase color${H[m]}`,children:f[m]}),e.jsx("div",{className:`text-[0.6em] font-sans color${C[d]}`,children:v[d]})]})),M=()=>{const[s,n]=o.useState(new Date),[l,c]=o.useState(0),[m,d]=o.useState(!1),[N,y]=o.useState(!0),b=async()=>{const g=new Promise((i,r)=>setTimeout(()=>r(new Error("Timeout")),3e3)),x=k.map(i=>{const r=typeof i=="string"?i:i.url,u={headers:{},signal:AbortSignal.timeout(3e3)};return typeof i!="string"&&i.noCors&&(u.mode="no-cors"),fetch(r,u).then(async a=>{if(!a.ok&&a.type!=="opaque")throw new Error("Not OK");return a.type==="opaque"?{timestamp:Date.now()}:a.json()}).then(a=>({data:a,url:r})).catch(()=>null)});try{const i=await Promise.race([Promise.race(x.filter(Boolean)),g]);if(!i)return!1;const{data:r,url:u}=i,a=z(r,u);if(!a||isNaN(a.getTime()))return!1;const T=new Date,w=a.getTime()-T.getTime();return Math.abs(w)>24*60*60*1e3?!1:(c(w),n(a),!0)}catch{return!1}};o.useEffect(()=>{(async()=>{m||(await b(),d(!0),y(!1))})();const x=setInterval(()=>{const r=new Date(Date.now()+l);n(r)},1e3),i=setInterval(b,36e5);return()=>{clearInterval(x),clearInterval(i)}},[l,m]);const p=D(s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes()),t=I(p);return e.jsx("div",{className:"w-full",children:N?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-7",children:e.jsxs("h2",{className:"text-[20px] mb-3 max-sm:mb-2",children:["Lịch âm hôm nay là",e.jsxs("strong",{className:"mx-1 font-bold text-orange-300 max-md:block",children:["ngày ",p.d," tháng ",p.m]}),"năm",e.jsxs("span",{className:"mx-1 font-bold darkColor",children:[e.jsx("span",{className:"font-bold uppercase",children:j[t.bs.y[0]]})," ",e.jsx("span",{className:"font-bold uppercase",children:f[t.bs.y[1]]})]}),"hiện tại là giờ ",e.jsx("strong",{className:"font-bold uppercase",children:f[t.bs.h[1]]})]})}),e.jsxs("div",{className:"grid grid-cols-4 text-center w-[800px] max-md:w-full mx-auto gap-3 text-[2.5em] max-md:text-[1.3em] font-mono darkColor",children:[e.jsx(h,{label:"Năm",time:t.sn.y,can:t.bs.y[0],chi:t.bs.y[1],lthg:t.bs.y[2]}),e.jsx(h,{label:"Tháng",time:t.sn.m,lunarTime:t.ln.m,can:t.bs.m[0],chi:t.bs.m[1],lthg:t.bs.m[2]}),e.jsx(h,{label:"Ngày",time:t.sn.d,lunarTime:t.ln.d,can:t.bs.d[0],chi:t.bs.d[1],lthg:t.bs.d[2]}),e.jsx(h,{label:"Giờ",time:t.sn.h,lunarTime:t.ln.h,can:t.bs.h[0],chi:t.bs.h[1],lthg:t.bs.h[2]})]})]})})},P=o.memo(M);export{P as default};
