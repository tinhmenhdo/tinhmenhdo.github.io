import{j as e}from"./D_zvdyIk.js";import{r as o}from"./C0L9AvQN.js";import{i as _,b as N,w as H,C as b,L as C,J as S,o as v}from"./D57xKbYi.js";import{c as I}from"./DhIQ85jD.js";import"./Cpj98o6Y.js";const D=["https://worldtimeapi.org/api/timezone/Asia/Ho_Chi_Minh","https://api.weatherapi.com/v1/timezone.json?key=0155aa8ee0e3416ab5851326241611&q=Ho_Chi_Minh","https://timeapi.io/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://www.timeapi.io/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://www.timeapi.dev/api/Time/current/zone?timeZone=Asia/Ho_Chi_Minh","https://api.sunrise-sunset.org/json?lat=10.8231&lng=106.6297&formatted=0",{url:"https://time.vuquyettam.workers.dev",noCors:!0}],M=(s,n)=>{try{return n.includes("weatherapi")?new Date(s.location.localtime):n.includes("worldtimeapi")?new Date(s.datetime):n.includes("timeapi.io")||n.includes("timeapi.dev")?new Date(s.dateTime):n.includes("sunrise-sunset")?new Date(s.results.solar_noon):n.includes("vuquyettam")?new Date(s.timestamp):null}catch{return null}},p=o.memo(({label:s,time:n,minute:m,lunarTime:c,can:l,chi:d,lthg:u})=>e.jsxs("div",{className:"py-5 bg-black/55 rounded-xl font-heading",children:[e.jsx("div",{className:"font-bold uppercase text-white/40",children:s}),e.jsx("time",{className:"font-bold text-orange-200 text-[1.15em] max-md:text-[1.2em]",children:s==="Giờ"?`${String(n).padStart(2,"0")}h${String(m).padStart(2,"0")}`:`${String(n).padStart(2,"0")}`}),e.jsx("div",{className:"font-bold uppercase",children:c?e.jsx("span",{className:"px-3 text-gray-500 bg-white/80 rounded-2xl",children:String(c).padStart(2,"0")}):e.jsx("span",{className:"text-gray-500",children:" "})}),e.jsx("div",{className:`font-bold uppercase color${_[l]}`,children:N[l]}),e.jsx("div",{className:`font-bold uppercase color${H[d]}`,children:b[d]}),e.jsx("div",{className:`text-[0.6em] font-sans color${C[u]}`,children:S[u]})]})),k=()=>{const[s,n]=o.useState(new Date),[m,c]=o.useState(0),[l,d]=o.useState(!1),[u,y]=o.useState(!0),g=async()=>{const w=new Promise((i,r)=>setTimeout(()=>r(new Error("Timeout")),3e3)),x=D.map(i=>{const r=typeof i=="string"?i:i.url,h={headers:{},signal:AbortSignal.timeout(3e3)};return typeof i!="string"&&i.noCors&&(h.mode="no-cors"),fetch(r,h).then(async a=>{if(!a.ok&&a.type!=="opaque")throw new Error("Not OK");return a.type==="opaque"?{timestamp:Date.now()}:a.json()}).then(a=>({data:a,url:r})).catch(()=>null)});try{const i=await Promise.race([Promise.race(x.filter(Boolean)),w]);if(!i)return!1;const{data:r,url:h}=i,a=M(r,h);if(!a||isNaN(a.getTime()))return!1;const T=new Date,j=a.getTime()-T.getTime();return Math.abs(j)>24*60*60*1e3?!1:(c(j),n(a),!0)}catch{return!1}};o.useEffect(()=>{(async()=>{l||(await g(),d(!0),y(!1))})();const x=setInterval(()=>{const r=new Date(Date.now()+m);n(r)},1e3),i=setInterval(g,36e5);return()=>{clearInterval(x),clearInterval(i)}},[m,l]);const f=I(s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes()),t=v(f);return e.jsx("div",{className:"w-full",children:u?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-7",children:e.jsxs("h2",{className:"text-[20px] mb-3 max-sm:mb-2",children:["Lịch âm hôm nay là",e.jsxs("strong",{className:"mx-1 font-bold text-orange-300 max-md:block",children:["ngày ",f.d," tháng ",f.m]}),"năm",e.jsxs("span",{className:"mx-1 font-bold darkColor",children:[e.jsx("span",{className:"font-bold uppercase",children:N[t.bs.y[0]]})," ",e.jsx("span",{className:"font-bold uppercase",children:b[t.bs.y[1]]})]}),"hiện tại là giờ ",e.jsx("strong",{className:"font-bold uppercase",children:b[t.bs.h[1]]})]})}),e.jsxs("div",{className:"grid grid-cols-4 text-center w-[800px] max-md:w-full mx-auto gap-3 text-[2.5em] max-md:text-[1.3em] font-mono darkColor",children:[e.jsx(p,{label:"Năm",time:t.sn.y,can:t.bs.y[0],chi:t.bs.y[1],lthg:t.bs.y[2]}),e.jsx(p,{label:"Tháng",time:t.sn.m,lunarTime:t.ln.m,can:t.bs.m[0],chi:t.bs.m[1],lthg:t.bs.m[2]}),e.jsx(p,{label:"Ngày",time:t.sn.d,lunarTime:t.ln.d,can:t.bs.d[0],chi:t.bs.d[1],lthg:t.bs.d[2]}),e.jsx(p,{label:"Giờ",time:t.sn.h,minute:s.getMinutes(),lunarTime:t.ln.h,can:t.bs.h[0],chi:t.bs.h[1],lthg:t.bs.h[2]})]})]})})},q=o.memo(k);export{q as default};
