import{j as e}from"./Bq1fMrfD.js";import{r as t}from"./Ct-_TUOu.js";import{I as n,a}from"./BrmUfImj.js";function s({isFlipping:n,onAnimationComplete:a,results:s}){const l=t.useRef(null);return t.useEffect((()=>{if(!n||!l.current)return;const e=l.current,t=e.getContext("2d");if(!t)return;const i=.75,o=25,r=s.map(((t,n)=>{const a=e.width/(s.length+1),l=a*(n+1),i=(Math.random()-.5)*(.5*a);return{x:Math.min(Math.max(l+i,50+100*n),e.width-50),y:e.height/2,velocityX:200*(Math.random()-.5),velocityY:-1500*(1+.3*Math.random()),scale:1.8,isSettled:!1,result:t,bounceCount:0,rotationX:0,rotationSpeed:200*(1+.5*Math.random()),maxBounces:2+Math.floor(3*Math.random())}}));let c=performance.now();const h=n=>{const s=(n-c)/1e3;c=n,t.clearRect(0,0,e.width,e.height);let l=!0;r.forEach((n=>{if(!n.isSettled){n.velocityY+=3e3*s,n.y+=n.velocityY*s,n.x+=n.velocityX*s;const t=Math.max(0,(e.height/2-n.y)/(e.height/2));if(n.rotationX+=(n.rotationSpeed+20*t)*s,n.y>350-o*n.scale)if(n.y=350-o*n.scale,n.bounceCount<n.maxBounces){const e=.3*Math.random()-.15+1;n.velocityY=.4*-Math.abs(n.velocityY)*e,n.velocityX*=i*(.2*Math.random()-.1+1),n.bounceCount++,n.rotationSpeed*=i*(.8+.4*Math.random());const t=.2*Math.random()-.1+1;n.scale=(.9+(1.2-.9)*(1-n.bounceCount/n.maxBounces))*t}else n.isSettled=!0,n.scale=1.2,n.velocityX=0,n.velocityY=0,n.rotationSpeed=0,n.rotationX="N"===n.result?0:Math.PI;if(n.x<o*n.scale?(n.x=o*n.scale,n.velocityX=Math.abs(n.velocityX)*i):n.x>e.width-o*n.scale&&(n.x=e.width-o*n.scale,n.velocityX=-Math.abs(n.velocityX)*i),0===n.bounceCount){const t=(n.y-e.height/2)/(.3*e.height);n.scale=.9+.9*(1-Math.min(1,Math.max(0,t)))}l=!1}(n=>{t.save(),t.translate(n.x,n.y);const a=Math.abs(Math.cos(n.rotationX));t.scale(n.scale,n.scale*a);const s=350-n.y,l=Math.max(.1,1-s/(e.height/2));t.beginPath(),t.ellipse(0,s/n.scale,o*l,5,0,0,2*Math.PI),t.fillStyle=`rgba(0, 0, 0, ${.3*l})`,t.fill(),t.beginPath(),t.arc(0,0,o,0,2*Math.PI);const i=Math.cos(n.rotationX)>0,r=i?"#FFD700":"#808080";t.fillStyle=r,t.fill(),t.strokeStyle=i?"#B8860B":"#666666",t.lineWidth=2,t.stroke(),n.isSettled&&(t.beginPath(),t.arc(0,0,20,0,2*Math.PI),t.strokeStyle=i?"#B8860B":"#666666",t.lineWidth=1,t.stroke(),t.fillStyle=i?"#B8860B":"#666666",t.font="bold 20px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(n.result,0,0)),t.restore()})(n)})),r.forEach(((e,t)=>{r.slice(t+1).forEach((t=>{const n=t.x-e.x,a=t.y-e.y,s=Math.sqrt(n*n+a*a),l=50*Math.max(e.scale,t.scale);if(s<l){const i=Math.atan2(a,n),o=.5*(l-s);e.isSettled||(e.x-=Math.cos(i)*o,e.velocityX-=Math.cos(i)*o),t.isSettled||(t.x+=Math.cos(i)*o,t.velocityX+=Math.cos(i)*o)}}))})),l?setTimeout(a,500):requestAnimationFrame(h)};requestAnimationFrame(h)}),[n,a,s]),e.jsx("canvas",{ref:l,width:400,height:400,className:"mx-auto"})}const l=({title:t,content:n,btnId:a,onCopy:s})=>e.jsx("div",{className:"mt-4 md:mt-6",children:e.jsxs("div",{className:"rounded-md border-[0.5px] border-gray-300 bg-gray-100 dark:bg-gray-950",children:[e.jsxs("div",{className:"flex h-9 items-center justify-between rounded-t-md bg-gray-200 px-4 py-2 font-sans text-xs text-black/85 select-none dark:bg-gray-800",children:[e.jsx("span",{children:t}),e.jsxs("button",{className:"flex items-center gap-1",onClick:()=>s(n,a),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 24 24",className:"icon-sm",children:e.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z",clipRule:"evenodd"})}),e.jsx("span",{id:a,className:"cursor-pointer pl-2 font-sans text-sm",children:"Click Copy - Lấy Text"})]})]}),e.jsx("div",{children:e.jsx("textarea",{className:"h-[120px] w-full resize-none overflow-y-auto border-none bg-gray-100 p-4 text-left font-mono text-xs leading-normal text-gray-600 focus:bg-yellow-100 focus:outline-hidden md:h-[140px] dark:bg-gray-900 dark:text-gray-400 dark:focus:bg-yellow-900",readOnly:!0,value:n})})]})});function i(){const[i,o]=t.useState([]),[r,c]=t.useState(!1),[h,g]=t.useState(null),[x,d]=t.useState(null),[u,m]=t.useState("");t.useEffect((()=>{if(h){let e="";const t=n.findIndex((e=>e[0]===h.queIcon));e+="=== QUẺ CHỦ ===\n",e+=`Quẻ số: ${t+1}\n`,e+=`Tên quẻ: ${h.queTen}\n`,e+=`Biểu tượng: ${h.queIcon}\n`,e+=`Ý nghĩa: ${h.queMeaning}\n\n`,e+="=== HÀO ĐỘNG ===\n";const a=h.haoResults.filter((e=>"amDong"===e.type||"duongDong"===e.type));if(a.length>0?a.forEach((t=>{const n="amDong"===t.type?"Âm Động":"Dương Động";e+=`Hào ${t.haoNumber}: ${n}\n`})):e+="Không có hào động\n",e+="\n",e+="=== QUẺ BIẾN ===\n",h.queBien){const t=n.findIndex((e=>e[0]===h.queBien?.queIcon));e+=`Quẻ số: ${t+1}\n`,e+=`Tên quẻ: ${h.queBien.queTen}\n`,e+=`Biểu tượng: ${h.queBien.queIcon}\n`,e+=`Ý nghĩa: ${h.queBien.queMeaning}\n`}else e+="Không có quẻ biến\n";m(e)}else m("")}),[h]);const p=e=>{const t=[...e].sort(((e,t)=>e.haoNumber-t.haoNumber)).reverse().map((e=>"duong"===e.type||"duongDong"===e.type?"1":("am"===e.type||e.type,"0"))).join(""),s=a.findIndex((e=>e===t));if(-1!==s){const t={queIcon:n[s][0],queTen:n[s][1],queMeaning:n[s][2]},a=(e=>{if(!e.some((e=>"amDong"===e.type||"duongDong"===e.type)))return null;const t=e.map((e=>({...e,type:"amDong"===e.type?"duong":"duongDong"===e.type?"am":e.type,symbol:"amDong"===e.type?"———":"duongDong"===e.type?"— —":e.symbol})));return p(t)})(e);return{...t,queBien:a}}return null},b=[...i].sort(((e,t)=>e.haoNumber-t.haoNumber));return e.jsxs("div",{className:"relative z-10 my-8 mt-4 mb-96 px-5",children:[e.jsxs("h1",{className:"mt-10 mb-5 text-center text-xl font-bold",children:["Gieo quẻ Kinh Dịch ",(new Date).getFullYear()]}),e.jsxs("div",{className:"mt-10 mb-5",children:[e.jsxs("div",{className:"text-lg",children:[e.jsx("p",{children:"Đây là nơi bạn có thể tìm đến khi đứng trước những băn khoăn chưa có lời giải, hoặc ngay cả khi không rõ mình đang cần điều gì. Qua 64 quẻ Kinh Dịch – hệ thống dự đoán uyên thâm nhất của nhân loại, bạn có thể khám phá những thông điệp sâu sắc, mở ra hướng đi tiềm năng hoặc tìm thấy sự sáng tỏ trong tâm trí."}),e.jsx("p",{className:"my-2",children:"Không cần chuẩn bị không gian đặc biệt, bạn chỉ cần tĩnh tâm, thả lỏng, buông bỏ mọi suy nghĩ và tập trung hoàn toàn vào từng lần tung quẻ. Bạn có thể thực hiện việc này ở bất kỳ đâu, bất kỳ lúc nào. Kinh Dịch không đòi hỏi bạn phải có một câu hỏi cụ thể, mà đôi khi chính những quẻ ngẫu nhiên lại là cách để bạn khám phá những điều chưa từng nghĩ đến, mang đến những góc nhìn mới mẻ cho những vấn đề tiềm ẩn trong cuộc sống."}),e.jsx("p",{children:"Hãy nhớ rằng, tung quẻ không chỉ là để tìm kiếm câu trả lời, mà còn là cách kết nối với dòng chảy tự nhiên của vũ trụ. Tuy nhiên, hãy sử dụng quẻ một cách cân nhắc, tránh việc thực hiện quá nhiều lần liên tiếp để đảm bảo độ chính xác và sự linh ứng. Hãy để mỗi lần tung quẻ là một khoảnh khắc bạn dừng lại, lắng nghe và cảm nhận những chỉ dẫn mà Kinh Dịch dành riêng cho bạn."})]}),e.jsx("div",{className:"my-5 text-center text-lg",children:e.jsx("b",{children:"Ấn vào phần Tung Xu để gieo quẻ (chú ý tung 6 lần)"})}),e.jsx("div",{className:"wrap mx-auto flex w-full lg:w-[1000px]",children:i.length>0&&e.jsxs("div",{className:"mx-auto mt-8 rounded-lg bg-white p-6 shadow-xl lg:w-[1024px] dark:bg-gray-800",children:[e.jsx("div",{className:"mx-auto mb-4 flex w-[243px] flex-col-reverse",children:b.map(((t,n)=>e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("span",{className:"w-16",children:["Hào",t.haoNumber,":"]}),e.jsx("span",{className:"w-[90px] text-left font-mono text-[32px] leading-[20px]",children:t.symbol}),e.jsx("div",{className:"ml-5 flex space-x-1",children:t.coins.map(((a,s)=>e.jsx("div",{className:"flex h-4 w-4 items-center justify-center rounded-full "+("N"===a?"bg-yellow-400":"bg-gray-400"),children:a},`${t.id+(new Date).getTime()+n+s}-${a}`)))}),e.jsx("span",{className:"absolute top-[3px] right-[-10px] ml-3 text-xs text-gray-600 dark:text-white",children:t.trangThai})]},t.id+(new Date).getTime()+n)))}),e.jsx("div",{className:"mt-6 w-full border-t pt-4",children:h&&e.jsxs("div",{className:"grid place-items-center gap-8 "+(h.queBien?"grid-cols-1 lg:grid-cols-3":"grid-cols-1 lg:grid-cols-2"),children:[e.jsxs("div",{className:"rounded-lg bg-gray-100 p-4 text-center dark:bg-gray-800",children:[e.jsx("div",{className:"mb-2 text-4xl font-semibold md:text-6xl lg:text-8xl",children:h.queIcon}),e.jsxs("h3",{className:"mb-2 text-2xl font-semibold",children:["Quẻ chủ: ",h.queTen]}),e.jsx("p",{className:"text-left text-lg text-gray-700 dark:text-gray-300",children:h.queMeaning})]}),e.jsxs("div",{className:"flex h-full w-full flex-col items-center rounded-lg bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsx("h4",{className:"mb-3 text-center text-lg font-semibold",children:"Hào Động"}),(()=>{const t=h.haoResults.filter((e=>"amDong"===e.type||"duongDong"===e.type));return t.length>0?e.jsx("div",{className:"space-y-2 rounded-lg bg-gray-100 p-4 dark:bg-gray-800",children:t.map((t=>e.jsx("div",{className:"",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Hào ",t.haoNumber,":",e.jsx("span",{className:"ml-2 text-base",children:"amDong"===t.type?e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Âm Động"}):e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Dương Động"})})]})},t.haoNumber)))}):e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Không có hào động"})})()]}),h.queBien&&e.jsxs("div",{className:"rounded-lg bg-gray-100 p-4 text-center dark:bg-gray-800",children:[e.jsx("div",{className:"mb-2 text-4xl font-semibold md:text-6xl lg:text-8xl",children:h.queBien.queIcon}),e.jsxs("h3",{className:"mb-2 text-2xl font-semibold",children:["Quẻ biến: ",h.queBien.queTen]}),e.jsx("p",{className:"text-left text-lg text-gray-700 dark:text-gray-300",children:h.queBien.queMeaning})]})]})}),h&&e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Kết quả Gieo Quẻ dùng cho AI",content:u,btnId:"btnCopyGieoQue",onCopy:(e,t)=>{const n=document.getElementById(t);if(!n)return;const a=n.textContent;navigator.clipboard.writeText(e).then((()=>{n.textContent="Đã copy",setTimeout((()=>{n.textContent=a}),2e3)}))}}),e.jsxs("div",{className:"px-4 pt-10 text-xl",children:["Ấn copy lấy kết quả bên trên vào app [Lưu ý đúng app]"," ",e.jsx("a",{href:"https://chatgpt.com/g/g-M3t2SSA5j-kinh-dich-du-doan-tinh-menh-do",target:"_blank",className:"mx-1 rounded-2xl bg-orange-100 px-2 text-orange-500 hover:bg-orange-200",children:"Kinh Dịch & Dự Đoán - Tinh Mệnh Đồ"})," ","trên nền tảng GPT để đặt câu hỏi. ",e.jsx("br",{}),e.jsx("span",{className:"text-md italic",children:"Nếu không copy bằng nút được có thể bôi đen copy dữ liệu trong kết quả."})]})]})]})}),e.jsx("div",{className:"pt-10 text-center text-lg",children:e.jsx("a",{href:"/cach-gieo-que-hoi-viec-chuan-xac",className:"text-blue-500 underline hover:text-orange-500",target:"_blank",children:"Xem quẻ trên Tinh Mệnh Đồ như thế nào?"})}),e.jsx("div",{className:"flex justify-center",children:i.length<6?e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:async()=>{if(r||i.length>=6)return;const e=(e=>{const t=Array.from({length:3}).fill(null).map((()=>(()=>{const e=new Uint8Array(1);return crypto.getRandomValues(e),e[0]<128?"N":"S"})())),n=t.filter((e=>"N"===e)).length;let a,s,l="";return 3===n?(a="amDong",s="— —",l="(X)"):0===n?(a="duongDong",s="———",l="(O)"):2===n?(a="duong",s="———",l=""):(a="am",s="— —",l=""),{id:e,coins:t,type:a,symbol:s,trangThai:l,haoNumber:e}})(i.length+1);c(!0),d(e)},disabled:r,className:"fixed bottom-9 left-1/2 h-[100px] w-[100px] -translate-x-1/2 rounded-full bg-orange-700 px-2 text-white uppercase shadow-[inset_-2px_-2px_4px_rgba(0,0,0,0.4),_inset_2px_2px_4px_rgba(255,255,255,0.3),_0_4px_8px_rgba(0,0,0,0.3)] transition-all [text-shadow:_1px_1px_1px_rgba(0,0,0,0.5)] hover:bg-amber-600 active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),_inset_-2px_-2px_4px_rgba(255,255,255,0.3)] disabled:bg-gray-400",children:r?"Đang tung...":`Tung đồng xu (Hào ${i.length+1})`}),r&&x&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(s,{isFlipping:r,onAnimationComplete:()=>{if(!x)return;const e=[...i,x];if(o(e),c(!1),d(null),6===e.length){const t=p(e);t&&g({haoResults:e,queIcon:t.queIcon,queTen:t.queTen,queMeaning:t.queMeaning,queBien:t.queBien})}},results:x.coins})})]}):e.jsx("button",{type:"button",onClick:()=>{o([]),g(null)},className:"fixed right-10 bottom-9 h-[100px] w-[100px] -translate-x-1/2 rounded-full bg-orange-700 px-2 text-white uppercase shadow-[inset_-2px_-2px_4px_rgba(0,0,0,0.4),_inset_2px_2px_4px_rgba(255,255,255,0.3),_0_4px_8px_rgba(0,0,0,0.3)] transition-all [text-shadow:_1px_1px_1px_rgba(0,0,0,0.5)] hover:bg-amber-600 active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),_inset_-2px_-2px_4px_rgba(255,255,255,0.3)] disabled:bg-gray-400",children:"Gieo quẻ mới"})})]})]})}export{i as default};