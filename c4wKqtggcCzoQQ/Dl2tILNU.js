import{j as e}from"./Bq1fMrfD.js";import{r as t}from"./Ct-_TUOu.js";import{L as r,H as a,f as s,N as n,a as l,C as i,g as d}from"./Bi4h2es9.js";import{G as c,B as o,D as x,S as h,C as g,b as m,c as b,a as u,Q as y,E as p,d as N,T as j}from"./DbfKYVUz.js";import"./C3PoQbqi.js";import"./D0xrPNr-.js";import"./C0SZ43gy.js";import"./0SDmb_Ec.js";import"./DSBtqZOR.js";import"./Bdu5tBIr.js";import"./CyO_XdY9.js";const f=u(j.SLATE),v={[n.T1]:"bg-blue-300 hover:bg-blue-400 text-gray-900",[n.T2]:"bg-blue-400 hover:bg-blue-500 text-white",[n.T3]:"bg-blue-500 hover:bg-blue-600 text-white",[n.T4]:"bg-blue-600 hover:bg-blue-700 text-white",[n.T5]:"bg-blue-700 hover:bg-blue-800 text-white",[n.T6]:"bg-blue-800 hover:bg-blue-900 text-white",[n.M1]:"bg-green-300 hover:bg-green-400 text-gray-900",[n.M2]:"bg-green-400 hover:bg-green-500 text-white",[n.M3]:"bg-green-500 hover:bg-green-600 text-white",[n.M4]:"bg-green-600 hover:bg-green-700 text-white",[n.M5]:"bg-green-700 hover:bg-green-800 text-white",[n.M6]:"bg-green-800 hover:bg-green-900 text-white",[n.K1]:"bg-gray-100 hover:bg-gray-400 text-gray-700",[n.K2]:"bg-gray-200 hover:bg-gray-500 text-gray-600",[n.K3]:"bg-gray-300 hover:bg-gray-600 text-gray-500",[n.K4]:"bg-gray-400 hover:bg-gray-700 text-white",[n.K5]:"bg-gray-500 hover:bg-gray-800 text-white",[n.K6]:"bg-gray-600 hover:bg-gray-900 text-white",[n.G1]:"bg-yellow-300 hover:bg-yellow-400 text-gray-900",[n.G2]:"bg-yellow-400 hover:bg-yellow-500 text-gray-900",[n.G3]:"bg-yellow-500 hover:bg-yellow-600 text-white",[n.G4]:"bg-yellow-600 hover:bg-yellow-700 text-white",[n.G5]:"bg-yellow-700 hover:bg-yellow-800 text-white",[n.G6]:"bg-yellow-800 hover:bg-yellow-900 text-white",[n.H1]:"bg-red-300 hover:bg-red-400 text-gray-900",[n.H2]:"bg-red-400 hover:bg-red-500 text-white",[n.H3]:"bg-red-500 hover:bg-red-600 text-white",[n.H4]:"bg-red-600 hover:bg-red-700 text-white",[n.H5]:"bg-red-700 hover:bg-red-800 text-white",[n.H6]:"bg-red-800 hover:bg-red-900 text-white"},k=b(f),w=({className:n=""})=>{const[b,u]=t.useState(""),[j,w]=t.useState(-1),[C,T]=t.useState(""),[G,S]=t.useState(c.ELEMENT),[E,M]=t.useState([]),[$,I]=t.useState([]),[L,H]=t.useState(""),[D,z]=t.useState(""),[A,K]=t.useState(""),[O,B]=t.useState(""),[F,q]=t.useState({}),[R,P]=t.useState(!1),[J,U]=t.useState([]),[Y,Q]=t.useState(-1),[_,X]=t.useState(!1),[Z,V]=t.useState({}),W={title:"L·ª•c Th·∫≠p Hoa Gi√°p",description:"Luy·ªán t·∫≠p nh·∫≠n bi·∫øt h√†nh v√† n·∫°p √¢m c·ªßa c√°c Jiazi",generateQuestion:()=>{S(c.ELEMENT),K(""),B(""),P(!1),X(!1),Q(-1),U([]),V({});const e=Math.floor(Math.random()*r.length),t=r[e],n=d[e],o=s[e],x=t.split(" ")[1],h=a[n],g=o,m=function(e){const t=Object.values(a),r=a[e],s=t.filter((e=>e!==r)),n=s[Math.floor(Math.random()*s.length)];return Math.random()>.5?[r,n]:[n,r]}(n),b=function(e){const[t,r]=e.split(" "),s=[],n=l.indexOf(t),c=i.indexOf(r),d=l.indexOf("Gi√°p");let o=n,x=c;for(;o!==d;){const e=l[o],t=i[x],r=`${e} ${t}`;s.push({cung:t,canChi:r,element:"ƒê·∫øm ng∆∞·ª£c",elementId:0,step:`ƒê·∫øm ng∆∞·ª£c: ${r} (${e} ‚Üí Gi√°p)`}),o=(o-1+10)%10,x=(x-1+12)%12}const h=l[o],g=i[x],m=`${h} ${g}`;s.push({cung:g,canChi:m,element:"ƒê·∫ßu tu·∫ßn",elementId:0,step:`T√¨m th·∫•y: ${e} thu·ªôc tu·∫ßn ${m}`});const b=function(e){const[t,r]=e.split(" "),a=l.indexOf(t),s=i.indexOf(r);let n=(a-l.indexOf("Gi√°p")+10)%10;n<0&&(n+=10);let c=(s-n+12)%12;return c<0&&(c+=12),`Gi√°p ${i[c]}`}(e),u=function(e){return{"Gi√°p T√Ω":[4,6,3,5,4],"Gi√°p Ng·ªç":[4,6,3,5,4],"Gi√°p D·∫ßn":[2,5,6,3,2],"Gi√°p Th√¢n":[2,5,6,3,2],"Gi√°p Th√¨n":[6,2,5,4,3],"Gi√°p Tu·∫•t":[6,2,5,4,3]}[e]||[4,6,3,5,4]}(b),[,y]=b.split(" ");let p=i.indexOf(y),N=d,j=0;for(;;){const t=i[p],r=`${l[N]} ${t}`,n=Math.floor(j/2)%5,c=u[n],d=a[c],o=j%2==0;if(s.push({cung:t,canChi:r,element:c+" => "+d,elementId:c,step:`${r} - ${d} (${u.join("")}[${n+1}]${o?" ƒë·∫ßu":" cu·ªëi"})`}),r===e)break;p=(p+1)%12,N=(N+1)%10,j++}return s}(t);U(b),u(t),w(e),T(x),H(h),z(g),M(m),q({[x]:t})},resetSpecificState:()=>{u(""),w(-1),T(""),S(c.ELEMENT),M([]),I([]),H(""),z(""),K(""),B(""),q({}),P(!1),X(!1),Q(-1),U([]),V({})},createHistoryItem:(e,t,r)=>{const a=t?.elementCorrect||!1,s=t?.nayinCorrect||!1,n=a&&s;return{question:`${b} thu·ªôc h√†nh n√†o v√† n·∫°p √¢m g√¨?`,jiazi:b,jiaziCung:C,correctElement:L,userElement:t?.userElement||"Sai",elementCorrect:a,correctNayin:D,userNayin:t?.userNayin||"Sai",nayinCorrect:s,isFullyCorrect:n,timeSpent:r}},renderGameArea:(r,a)=>{const{gameState:n,gameMode:l,formatTime:i}=a||{},o=e=>({2:"#3b82f6",3:"#10b981",4:"#6b7280",5:"#eab308",6:"#ef4444"}[e]||"#000000"),x=t.useRef(null);return e.jsxs("div",{ref:x,children:[e.jsxs("div",{className:m,children:[g.map((t=>{const r=Z[t.name],a=F[t.name],s=Boolean(r||a),n=R&&Y>=0&&Y<J.length?J[Y]:null;let l="";return n&&n.cung===t.name?0===n.elementId?l="bg-yellow-100/50":n.elementId>0&&(l="bg-yellow-200/50"):r&&(0===r.elementId?l="bg-yellow-100/50":r.elementId>0&&(l="bg-yellow-200/50")),e.jsxs("div",{className:`${k(t.name,s,C)} ${t.position} ${l}`,children:[e.jsx("div",{className:`text-sm font-bold max-md:text-xs ${f[t.name].text} absolute top-1 left-0 flex w-full items-center justify-center`,children:t.name}),s&&e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-bold drop-shadow-sm xl:text-sm",style:{color:r?r.elementId>0?o(r.elementId):"#8b5cf6":"#000000"},children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold",children:r.canChi}),e.jsx("div",{className:"text-[10px] xl:text-xs",style:{color:r.elementId>0?o(r.elementId):"#a8a29e"},children:r.element})]}):a&&e.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200",children:a})})]},t.name)})),_&&e.jsx("div",{className:"absolute top-[15%] left-[5%] z-50 flex h-[70%] w-[90%] items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-[500px] rounded-xl border border-amber-200 bg-gradient-to-br from-amber-50 to-white p-4 shadow-2xl backdrop-blur-sm dark:border-amber-600 dark:from-amber-900 dark:to-gray-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-amber-700 dark:text-amber-300",children:"M·∫πo t√¨m h√†nh theo 6 ƒë·∫ßu Gi√°p"}),e.jsx("button",{onClick:()=>{X(!1)},className:"rounded-full bg-red-500 px-3 py-1 text-xs font-medium text-white hover:bg-red-600",children:"‚úï ƒê√≥ng"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"rounded-lg bg-stone-100 p-3 dark:bg-stone-900/30",children:[e.jsx("h4",{className:"mb-2 font-bold text-stone-800 dark:text-stone-300",children:"6 ƒë·∫ßu Gi√°p:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Gi√°p T√Ω","Gi√°p D·∫ßn","Gi√°p Th√¨n","Gi√°p Ng·ªç","Gi√°p Th√¢n","Gi√°p Tu·∫•t"].map((t=>e.jsx("span",{className:"rounded bg-stone-200 px-2 py-1 text-xs font-medium text-stone-800 dark:bg-stone-800 dark:text-stone-200",children:t},t)))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-lg bg-neutral-100 p-3 dark:bg-neutral-900/30",children:[e.jsx("h4",{className:"font-bold text-neutral-800 dark:text-neutral-300",children:"Gi√°p T√Ω, Gi√°p Ng·ªç:"}),e.jsx("p",{className:"text-neutral-700 dark:text-neutral-300",children:"46354 (Kim, H·ªèa, M·ªôc, Th·ªï, Kim)"}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"M·∫πo: ƒë·∫ßu v√† cu·ªëi l√† Kim, 635"})]}),e.jsxs("div",{className:"rounded-lg bg-neutral-100 p-3 dark:bg-neutral-900/30",children:[e.jsx("h4",{className:"font-bold text-neutral-800 dark:text-neutral-300",children:"Gi√°p D·∫ßn, Gi√°p Th√¢n:"}),e.jsx("p",{className:"text-neutral-700 dark:text-neutral-300",children:"25632 (Th·ªßy, Th·ªï, H·ªèa, M·ªôc, Th·ªßy)"}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"M·∫πo: ƒë·∫ßu v√† cu·ªëi l√† Th·ªßy, 563"})]}),e.jsxs("div",{className:"rounded-lg bg-neutral-100 p-3 dark:bg-neutral-900/30",children:[e.jsx("h4",{className:"font-bold text-neutral-800 dark:text-neutral-300",children:"Gi√°p Th√¨n, Gi√°p Tu·∫•t:"}),e.jsx("p",{className:"text-neutral-700 dark:text-neutral-300",children:"62543 (H·ªèa, Th·ªßy, Th·ªï, Kim, M·ªôc)"}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"M·∫πo: ƒë·ªß ng≈© h√†nh, c√≥ 62 v√† 543 gi·∫£m"})]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-100 p-3 dark:bg-gray-800",children:[e.jsx("h4",{className:"mb-2 font-bold text-gray-800 dark:text-gray-300",children:"Ng≈© h√†nh:"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"2-Th·ªßy, 3-M·ªôc, 4-Kim, 5-Th·ªï, 6-H·ªèa"})]})]})]})}),n?.isActive&&b&&C&&!_&&e.jsx("div",{className:"absolute top-[26%] left-[26%] z-40 flex h-[49%] w-[47%] items-center justify-center",children:e.jsxs("div",{className:y,children:[G===c.ELEMENT&&e.jsxs(e.Fragment,{children:["LEARNING"===l&&!R&&J.length>0&&e.jsxs("div",{className:"mb-3 space-y-2 text-center",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>{if("LEARNING"!==l)return;V({}),P(!0),Q(0);const e=setInterval((()=>{Q((t=>{const r=t+1;return r>0&&r<=J.length&&V((e=>({...e,[J[r-1].cung]:J[r-1]}))),r>=J.length?(clearInterval(e),setTimeout((()=>P(!1)),1200),t):r}))}),1200)},className:"rounded-full bg-green-500 px-3 py-2 text-xs font-medium text-white transition-colors hover:bg-green-600",children:"üéØ Xem c√°ch t√¨m"}),e.jsx("button",{onClick:()=>{"LEARNING"===l&&X(!0)},className:"rounded-full bg-amber-500 px-3 py-2 text-xs font-medium text-white transition-colors hover:bg-amber-600",children:"üìã C√¥ng th·ª©c"})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ƒê·∫ßu Gi√°p ‚Üí ƒê·∫øm theo quy t·∫Øc"})]}),R&&e.jsxs("div",{className:"mb-3 text-center",children:[e.jsxs("div",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:["üî¢ T√¨m h√†nh: ",Y+1,"/",J.length]}),Y>=0&&Y<J.length&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:J[Y].step})]}),e.jsx("div",{className:"mb-2 text-center",children:e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["1. ",e.jsx("span",{className:"font-bold",children:b})," h√†nh g√¨ ?"]})}),e.jsx("div",{className:"mt-2 flex justify-center gap-2",children:E.map((t=>e.jsx("button",{onClick:()=>(e=>{if(K(e),e===L){const e=d[j],t=function(e,t){const r=function(e){const t=[];for(let r=0;r<d.length;r++)d[r]===e&&t.push(s[r]);return[...new Set(t)]}(t);return[...r.filter((t=>t!==e)).sort((()=>.5-Math.random())).slice(0,2),e].sort((()=>.5-Math.random()))}(D,e);I(t),S(c.NAYIN)}else r(!1,{currentJiazi:b,correctElement:L,correctNayin:D},{userElement:e,userNayin:"",elementCorrect:!1,nayinCorrect:!1})})(t),className:`rounded-full px-6 py-3 text-xs font-medium transition-colors ${p[t]}`,disabled:R,children:t},t)))})]}),G===c.NAYIN&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["2. N·∫°p √¢m ",e.jsx("span",{className:"font-bold",children:b})," ?"]}),e.jsx("div",{className:"flex flex-col gap-1",children:$.map((t=>e.jsx("button",{onClick:()=>(e=>{B(e),r(!0,{currentJiazi:b,correctElement:L,correctNayin:D},{userElement:A,userNayin:e,elementCorrect:!0,nayinCorrect:e===D})})(t),className:`rounded-full px-2 py-3 text-xs font-medium transition-colors ${v[t]||"bg-gray-500 text-white hover:bg-gray-600"}`,children:t},t)))})]})]})})]}),n?.history&&n.history.length>0&&e.jsx("div",{className:"grid grid-cols-1 gap-8",children:e.jsx(N,{history:n.history,difficulty:n.selectedDifficulty||"MEDIUM",title:"Th·ªëng k√™ chi ti·∫øt",showShareButton:"CHALLENGE"===l,achievementLayout:"grid",showFullDownloadButton:!0,fullStatsContainerRef:x,getItemStatus:e=>e.isFullyCorrect?"correct":e.elementCorrect?"partial":"incorrect",getItemDisplayText:e=>`${e.jiazi} - H√†nh: ${e.correctElement}, N·∫°p √¢m: ${e.correctNayin}`,getItemTooltip:e=>`${e.jiazi} thu·ªôc h√†nh ${e.correctElement} v√† n·∫°p √¢m ${e.correctNayin}`,getCustomAchievements:e=>{const t=e.filter((e=>e.isFullyCorrect)).length,r=e.filter((e=>e.elementCorrect&&!e.nayinCorrect)).length,a=e.length,s=a>0?t/a*100:0,l=a>0?e.reduce(((e,t)=>e+(t.timeSpent||0)),0)/a:0;return[{label:"ƒê·ªô kh√≥",value:n?.selectedDifficulty||"MEDIUM",color:"#06b6d4"},{label:"C√¢u h·ªèi",value:`${a} c√¢u`,color:"#8b5cf6"},{label:"ƒê·ªô ch√≠nh x√°c",value:`${s.toFixed(1)}%`,color:"#10b981"},{label:"Th·ªùi gian TB",value:`${Math.floor(l/1e3)}s`,color:"#f59e0b"},{label:"ƒê√∫ng m·ªôt ph·∫ßn",value:`${r} c√¢u`,color:"#ec4899"}]},additionalStatsContent:n?.history&&n.history.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"mb-2 text-xl font-bold dark:text-gray-200",children:"L·ªãch s·ª≠ c√¢u h·ªèi"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"#"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Jiazi"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Phase 1: H√†nh"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Phase 2: N·∫°p √Çm"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"K·∫øt qu·∫£"}),"CHALLENGE"===l&&e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Th·ªùi gian"})]})}),e.jsx("tbody",{children:n?.history?.map(((t,r)=>e.jsxs("tr",{className:t.isFullyCorrect?"bg-green-50 dark:bg-green-900/30":t.elementCorrect?"bg-yellow-50 dark:bg-yellow-900/30":"bg-red-50 dark:bg-red-900/30",children:[e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700 dark:text-gray-200",children:(n?.history?.length||0)-r}),e.jsxs("td",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:[e.jsx("div",{className:"font-medium",children:t.jiazi}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Cung: ",t.jiaziCung]})]}),e.jsxs("td",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["‚úì ",t.correctElement]}),!t.elementCorrect&&e.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400",children:["‚úó ",t.userElement]}),e.jsx("div",{className:"text-xs",children:t.elementCorrect?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"ƒê√∫ng"}):e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Sai"})})]}),e.jsxs("td",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["‚úì ",t.correctNayin]}),t.elementCorrect&&!t.nayinCorrect&&e.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400",children:["‚úó ",t.userNayin]}),e.jsx("div",{className:"text-xs",children:t.elementCorrect?t.nayinCorrect?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"ƒê√∫ng"}):e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Sai"}):e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ch∆∞a ƒë·∫øn"})})]}),e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700",children:t.isFullyCorrect?e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:"Ho√†n h·∫£o"}):t.elementCorrect?e.jsx("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:"1/2 ƒë√∫ng"}):e.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:"Sai ngay"})}),"CHALLENGE"===l&&e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700 dark:text-gray-200",children:i?i(t.timeSpent):"0s"})]},r)))})]})})]})}):null})})]})},onAnswerSubmitted:(e,t)=>{}};return e.jsx(o,{className:n,config:W,difficultyLevels:h,questionPacks:x})};export{w as LucThapHoaGiapNew};