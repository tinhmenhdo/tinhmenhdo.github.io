import{j as e}from"./Bq1fMrfD.js";import{r as s}from"./Ct-_TUOu.js";import{S as t,C as r}from"./Bi4h2es9.js";import{B as a,D as n,S as i,C as l,b as c,e as o,a as d,Q as x,d as h,f as m,T as g}from"./DbfKYVUz.js";import"./C3PoQbqi.js";import"./D0xrPNr-.js";import"./C0SZ43gy.js";import"./0SDmb_Ec.js";import"./DSBtqZOR.js";import"./Bdu5tBIr.js";import"./CyO_XdY9.js";const u=t.slice(0,14),j=d(g.ORANGE),b=[[1,12,10,9,8,5,5,6,7,8,9,10,11,3],[2,1,11,10,9,6,4,5,6,7,8,9,10,2],[3,2,12,11,10,7,3,4,5,6,7,8,9,1],[4,3,1,12,11,8,2,3,4,5,6,7,8,12],[5,4,2,1,12,9,1,2,3,4,5,6,7,11],[6,5,3,2,1,10,12,1,2,3,4,5,6,10],[7,6,4,3,2,11,11,12,1,2,3,4,5,9],[8,7,5,4,3,12,10,11,12,1,2,3,4,8],[9,8,6,5,4,1,9,10,11,12,1,2,3,7],[10,9,7,6,5,2,8,9,10,11,12,1,2,6],[11,10,8,7,6,3,7,8,9,10,11,12,1,5],[12,11,9,8,7,4,6,7,8,9,10,11,12,4]].map((e=>{const s={};return u.forEach(((t,r)=>{s[t]=e[r]})),s}));function p(e,s,t){for(let r=0;r<b.length;r++){const a=b[r];if(a[e]===m[s])return a[t]}return 0}const y=o(j),f=({className:t=""})=>{const[o,d]=s.useState(""),[g,f]=s.useState(""),[N,k]=s.useState(""),[C,v]=s.useState({}),S={title:"Nhớ Vị Trí 14 Chính Tinh",description:"Luyện tập nhớ vị trí các ngôi sao trong lá số tử vi",generateQuestion:()=>{const e=Math.floor(Math.random()*u.length),s=u[e],t=u.filter((e=>e!==s)),r=t[Math.floor(Math.random()*t.length)],a=Object.entries(m),n=Math.floor(Math.random()*a.length),[i]=a[n];d(s),f(r),k(i),v({[i]:s})},resetSpecificState:()=>{d(""),f(""),k(""),v({})},createHistoryItem:(e,s,t)=>{const a=p(o,N,g),n=function(e,s){for(let t=0;t<b.length;t++){const a=b[t];if(a[e]===m[s])return r[a["Tử Vi"]-1]}return"N/A"}(o,N),i=s&&m[s.selectedCung]===a;return{question:`${o} cung ${N} thì ${g} cung nào?`,correctAnswer:r[a-1],userAnswer:s?.selectedCung||"Không trả lời",isCorrect:i,timeSpent:t,tuViPosition:n,sao1:o,sao1Cung:N,sao2:g,sao2Cung:r[a-1]}},renderGameArea:(t,r)=>{const{gameState:a,gameMode:n,formatTime:i}=r||{},d=s.useRef(null);return e.jsxs("div",{ref:d,children:[e.jsxs("div",{className:c,children:[l.map((s=>e.jsxs("div",{className:`${y(s.name,!!C[s.name])} ${s.position}`,onClick:()=>(e=>{if(!(a?.isActive&&o&&g&&N))return;const s=p(o,N,g),r=m[e]===s;t(r,{randSao:o,randCung:N,randSao2:g},{selectedCung:e})})(s.name),children:[e.jsx("div",{className:`text-sm font-bold max-md:text-xs ${j[s.name].text} absolute top-1 left-0 flex w-full items-center justify-center`,children:s.name}),C[s.name]&&e.jsx("div",{className:"xl:text-md absolute inset-0 flex items-center justify-center font-bold text-gray-800 drop-shadow-sm dark:text-gray-200",children:C[s.name]})]},s.name))),a?.isActive&&o&&g&&N&&e.jsx("div",{className:"absolute top-[27%] left-[26%] z-40 flex h-[90px] w-[47%] items-center justify-center",children:e.jsx("div",{className:x,children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"mx-1 font-bold",children:o})," tại"," ",e.jsx("span",{className:"mx-1 font-bold",children:N})," ",e.jsx("br",{})," ",e.jsx("div",{className:"mx-1 bg-amber-100 text-xl font-bold",children:g})," cung nào?"]})})}),a?.isActive&&e.jsx("div",{className:"absolute top-[50%] left-[26%] z-30 flex h-[25%] w-[47%] items-center justify-center",children:e.jsxs("div",{className:"w-full text-center text-sm dark:text-gray-200",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"mr-1",children:["Đúng"," ",e.jsx("span",{className:"font-bold text-green-600 dark:text-green-400",children:a.correctAnswers})," ","câu"]}),e.jsxs("span",{children:["sai ",e.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:a.wrongAnswers})," câu"]}),e.jsxs("div",{children:["Thời gian nghĩ"," ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:i?i(a.elapsedTime):"0s"})]})]}),o&&g&&N&&a.history.length>0&&e.jsxs("div",{className:"mt-2 mb-3 px-2 text-xs",children:[e.jsx("div",{className:"text-gray-300 max-md:hidden dark:text-gray-700",children:"- - - - - - - - - - - - -"}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Câu trước:"," ",a.history[0].isCorrect?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Đúng"}):e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Sai"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:a.history[0].sao1}),e.jsxs("span",{children:[" ",a.history[0].sao1Cung]}),e.jsx("span",{className:"mx-1",children:"→"}),e.jsx("span",{className:"font-medium",children:a.history[0].sao2}),e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[" ",a.history[0].sao2Cung]}),a.history[0].isCorrect?e.jsx(e.Fragment,{}):e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[" ","[",a.history[0].userAnswer,"]"]})]}),e.jsxs("div",{className:"text-orange-500 dark:text-orange-400",children:["Thế trận Tử Vi tại ",a.history[0].tuViPosition]})]})]})]})})]}),a?.history&&a.history.length>0&&e.jsx("div",{className:"grid grid-cols-1 gap-8",children:e.jsx(h,{history:a.history,difficulty:a.selectedDifficulty||"MEDIUM",title:"Thống kê chi tiết - 14 Chính Tinh",showShareButton:"CHALLENGE"===n,achievementLayout:"grid",showFullDownloadButton:"CHALLENGE"===n,fullStatsContainerRef:d,getItemStatus:e=>e.isCorrect?"correct":"incorrect",getItemDisplayText:e=>`${e.sao1} ${e.sao1Cung} → ${e.sao2} ${e.sao2Cung}`,getItemTooltip:e=>`${e.sao1} tại ${e.sao1Cung} → ${e.sao2} cung nào? (Đáp án: ${e.sao2Cung})`,getCustomAchievements:e=>{const s=e.filter((e=>e.isCorrect)).length,t=e.length,r=t>0?s/t*100:0,n=t>0?e.reduce(((e,s)=>e+(s.timeSpent||0)),0)/t:0,i=e.reduce(((e,s)=>e+(s.timeSpent||0)),0);return[{label:"Gói câu hỏi",value:t<=14?"14 câu":t<=28?"28 câu":t<=42?"42 câu":"56 câu",color:"#8b5cf6"},{label:"Độ khó",value:a?.selectedDifficulty||"MEDIUM",color:"#06b6d4"},{label:"Độ chính xác",value:`${r.toFixed(1)}%`,color:"#10b981"},{label:"Thời gian TB",value:`${Math.floor(n/1e3)}s`,color:"#f59e0b"},{label:"Tổng thời gian",value:`${Math.floor(i/1e3)}s`,color:"#ec4899"}]},additionalStatsContent:a?.history&&a.history.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"mb-2 text-xl font-bold dark:text-gray-200",children:"Lịch sử câu hỏi"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"#"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Câu hỏi"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Trả lời"}),e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Kết quả"}),"CHALLENGE"===n&&e.jsx("th",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:"Tốn thời gian"})]})}),e.jsx("tbody",{children:a?.history?.map(((s,t)=>e.jsxs("tr",{className:s.isCorrect?"bg-green-50 dark:bg-green-900/30":"bg-red-50 dark:bg-red-900/30",children:[e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700 dark:text-gray-200",children:(a?.history?.length||0)-t}),e.jsxs("td",{className:"border-b px-4 py-2 dark:border-gray-700 dark:text-gray-200",children:[s.sao1," ",s.sao1Cung," → ",s.sao2," ",s.sao2Cung]}),e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700 dark:text-gray-200",children:s.userAnswer}),e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700",children:s.isCorrect?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Đúng"}):e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Sai"})}),"CHALLENGE"===n&&e.jsx("td",{className:"border-b px-4 py-2 text-center dark:border-gray-700 dark:text-gray-200",children:i?i(s.timeSpent):"0s"})]},t)))})]})})]}):null})})]})},onAnswerSubmitted:(e,s)=>{}};return e.jsx(a,{className:t,config:S,difficultyLevels:i,questionPacks:n})};export{f as Remember14StarPostionNew};