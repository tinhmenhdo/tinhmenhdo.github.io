import{r as e}from"./Ct-_TUOu.js";const o=({debug:o=!1})=>(e.useEffect((()=>{const e=(window.emergencySwCleanup=async()=>{await(async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.getRegistrations();for(const o of e)await o.unregister(),o.scope;if(e.length>0&&e.length,"caches"in window){const e=await caches.keys();for(const o of e)await caches.delete(o);e.length>0&&e.length}const o=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&(t.includes("sw-")||t.includes("service-worker")||t.includes("workbox")||t.includes("pwa"))&&o.push(t)}o.forEach((e=>{localStorage.removeItem(e)}))}catch(e){}})(),setTimeout((()=>{window.location.reload()}),1e3)},()=>{delete window.emergencySwCleanup});return(async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.getRegistrations();for(const o of e){const e=o.active?.scriptURL||"";(e.includes("sw.js")||e.includes("service-worker.js")||e.includes("workbox")&&!e.includes("pwa-sw")||o.scope.endsWith("/")&&o.scope!==location.origin+"/")&&await o.unregister()}}catch(e){}})(),()=>{e()}}),[]),null);export{o as default};