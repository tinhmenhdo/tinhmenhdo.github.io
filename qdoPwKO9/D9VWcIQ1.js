import{jsx,jsxs,Fragment}from"react/jsx-runtime";import dayjs from"dayjs";import{memo,useState,useRef,useEffect,useMemo,useCallback,forwardRef,useImperativeHandle}from"react";import{a as appleIcon}from"./D7P-yqOq.js";import{C as CfgValue,t as typeLsName,a as typeLsColor,b as typeBanTCP,c as typeBanTCP_Color,d as changeCanTypeMsg,l as levelPhiHoaMsg,h as hideStarMsg,y as yearLoopStarMsg,p as pushGTMData}from"./DNyBicJe.js";import{M as PHIHOA_COLOR,P as PHIHOA_SYMBOL1}from"./CT7RaCzf.js";const DateTimeInput=memo((({typeInput:e,dateTime:n,onChange:s,minDate:a,_maxDate:t,showMinute:o=!1})=>{const l="dateTimeView"===e,i=l&&a?dayjs(a):null,r=l?i?.year()??1e3:1e3,c=l?(i?.year()??0)+120:2099,[d,m]=useState(dayjs(n)),[h,u]=useState({year:d.year(),month:d.month()+1,date:d.date(),hour:d.hour(),minute:d.minute()}),[x,f]=useState({start:100*Math.floor(d.year()/100),end:100*Math.floor(d.year()/100)+99}),[p,g]=useState(!1);useRef(0);const y=useRef();useEffect((()=>{const e=dayjs(n);m(e),u({year:e.year(),month:e.month()+1,date:e.date(),hour:e.hour(),minute:e.minute()})}),[n]);const b=[{name:"year",label:"Năm",min:r,max:c},{name:"month",label:"Tháng",min:1,max:12},{name:"date",label:"Ngày",min:1,max:31},{name:"hour",label:"Giờ",min:0,max:23,padStart:!0},...o?[{name:"minute",label:"Phút",min:0,max:59,padStart:!0}]:[]],j=useMemo((()=>l&&i?Array.from({length:121},((e,n)=>i.year()+n)):[]),[l,i]),w=useMemo((()=>Array.from({length:12},((e,n)=>n+1))),[]),v=useMemo((()=>Array.from({length:31},((e,n)=>n+1))),[]),L=useMemo((()=>Array.from({length:24},((e,n)=>n))),[]),C=useMemo((()=>Array.from({length:60},((e,n)=>n))),[]),k=useCallback(((n,a)=>{let t=d;if(a)switch(n.name){case"minute":t=59===t.minute()?t.minute(0).add(1,"hour"):t.add(1,"minute");break;case"hour":t=23===t.hour()?t.hour(0).add(1,"day"):t.add(1,"hour");break;case"date":t=t.date()===t.endOf("month").date()?t.date(1).add(1,"month"):t.add(1,"day");break;case"month":t=11===t.month()?t.month(0).add(1,"year"):t.add(1,"month");break;case"year":t=t.add(1,"year")}else switch(n.name){case"minute":t=0===t.minute()?t.subtract(1,"hour").minute(59):t.subtract(1,"minute");break;case"hour":t=0===t.hour()?t.subtract(1,"day").hour(23):t.subtract(1,"hour");break;case"date":1===t.date()?(t=t.subtract(1,"month"),t=t.date(t.daysInMonth())):t=t.subtract(1,"day");break;case"month":t=0===t.month()?t.subtract(1,"year").month(11):t.subtract(1,"month");break;case"year":t=t.subtract(1,"year")}if(l&&i){if(t.isBefore(i))t=dayjs(i);else if(t.year()>i.year()+120)return}else if(t.year()<r||t.year()>c)return;m(t),u({year:t.year(),month:t.month()+1,date:t.date(),hour:t.hour(),minute:t.minute()}),s(e,t.toDate())}),[d,i,l,r,c,s,e]),N=useCallback(((n,a)=>{let t=d;switch(n){case"year":t=d.year(a);break;case"month":t=d.month(a-1);break;case"date":t=d.date(a);break;case"hour":t=d.hour(a);break;case"minute":t=d.minute(a)}if(l&&i)if(t.isBefore(i))t=dayjs(i);else if(t.year()>i.year()+120)return;m(t),u((e=>({...e,[n]:a}))),s(e,t.toDate())}),[d,i,l,s,e]);useEffect((()=>()=>{y.current&&clearTimeout(y.current)}),[]);const H=useCallback((e=>{const n=useMemo((()=>"year"===e.name&&l?j:"month"===e.name?w:"date"===e.name?v:"hour"===e.name?L:C),[e.name,l,j,w,v,L,C]);return jsx("select",{value:h[e.name],onChange:n=>N(e.name,Number.parseInt(n.target.value)),className:"w-full h-full text-center text-xl font-medium cursor-pointer focus:outline-none appearance-none bg-transparent hover:bg-gray-50",children:n.map((n=>jsx("option",{value:n,children:e.padStart?n.toString().padStart(2,"0"):n},n)))})}),[h,N]),M=useCallback((e=>{f((n=>({start:n.start+(e?100:-100),end:n.end+(e?100:-100)})))}),[]),T=()=>{const e=[],n=l?i?.year()||1e3:x.start,s=l?(i?.year()||0)+120:x.end;for(let a=n;a<=s;a++)e.push(a);return e};return jsx("div",{className:"flex flex-col space-y-4",children:b.map((n=>jsxs("div",{className:"flex flex-col space-y-2",children:[jsx("label",{className:"text-sm font-medium text-gray-700",children:n.label}),jsxs("div",{className:"relative",children:[jsxs("div",{className:"flex items-center h-14 rounded-lg border border-gray-300 bg-white overflow-hidden",children:[jsx("button",{onClick:()=>k(n,!1),className:"\n                  flex-none w-14 h-full flex items-center justify-center text-2xl\n                  transition-colors hover:bg-gray-100 active:bg-gray-200\n                  text-gray-700 cursor-pointer\n                ",children:"dateTimeBorn"===e?"◀":"◁"}),jsx("div",{className:"flex-1 h-full flex items-center justify-center",children:"year"!==n.name||l?H(n):jsx("div",{className:"w-full h-full flex items-center justify-center cursor-pointer hover:bg-gray-50",onClick:()=>g(!p),children:jsxs("span",{className:"text-xl font-medium",children:[h[n.name]," ▾"]})})}),jsx("button",{onClick:()=>k(n,!0),className:"\n                  flex-none w-14 h-full flex items-center justify-center text-2xl\n                  transition-colors hover:bg-gray-100 active:bg-gray-200\n                  text-gray-700 cursor-pointer\n                ",children:"dateTimeBorn"===e?"▶":"▷"})]}),"year"===n.name&&!l&&p&&jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border rounded-lg shadow-lg z-50 max-h-60 overflow-auto",children:[jsxs("div",{className:"sticky top-0 flex justify-between items-center p-2 bg-gray-50 border-b",children:[jsxs("button",{onClick:()=>M(!1),className:"px-3 py-1 text-sm rounded hover:bg-gray-200",disabled:x.start<=1e3,children:["◀ ",x.start-100," - ",x.start-1]}),jsxs("span",{className:"font-medium",children:[x.start," - ",x.end]}),jsxs("button",{onClick:()=>M(!0),className:"px-3 py-1 text-sm rounded hover:bg-gray-200",disabled:x.end>=2099,children:[x.end+1," - ",x.end+100," ▶"]})]}),jsx("div",{className:"grid grid-cols-4 gap-1 p-2",children:T().map((n=>jsx("button",{onClick:()=>(n=>{const a=d.year(n);m(a),u((e=>({...e,year:n}))),s(e,a.toDate()),g(!1)})(n),className:`\n                        p-2 text-center rounded hover:bg-blue-50\n                        ${n===h.year?"bg-blue-100 font-medium":""}\n                      `,children:n},n)))})]})]})]},n.name)))})})),Icons={LaSoTuVi:({color:e="#2C3E50"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"5",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 7V17M7 12H17",stroke:e,strokeWidth:"2"})]}),LuongPhai:({color:e="#27AE60"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.5 9H21L16 14L18 21L12 17L6 21L8 14L3 9H9.5L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"4",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8V16M8 12H16",stroke:e,strokeWidth:"2"})]}),KhamThien:({color:e="#8E44AD"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.4 7.2L20 8.5L16 12.9L17 18.5L12 15.9L7 18.5L8 12.9L4 8.5L9.6 7.2L12 2Z",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8L13 10.5L15.5 11L13.75 12.75L14 15L12 14L10 15L10.25 12.75L8.5 11L11 10.5L12 8Z",fill:e})]}),TrungChau:({color:e="#C0392B"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 2V22M2 12H22",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:e,strokeWidth:"2"})]}),ShowStar:({color:e="#2980B9"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",stroke:e,strokeWidth:"2",fill:"none"}),jsx("circle",{cx:"12",cy:"12",r:"3",fill:e})]}),TuHoa:({color:e="#34495e"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.5 9H21L16 14L18 21L12 17L6 21L8 14L3 9H9.5L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"4",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8V16M8 12H16",stroke:e,strokeWidth:"2"})]}),LuuTuHoa:({color:e="#3498db"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.5 9H21L16 14L18 21L12 17L6 21L8 14L3 9H9.5L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"4",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8L14 12L12 16L10 12L12 8Z",stroke:e,strokeWidth:"2"})]}),TuanHoan:({color:e="#3498db"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M8 12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8L10 6M12 8L14 6",stroke:e,strokeWidth:"2"})]}),CungViTrung:({color:e="#9b59b6"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 2V22M2 12H22",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:e,strokeWidth:"2"})]}),LocKiToanDo:({color:e="#e67e22"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.5 9H21L16 14L18 21L12 17L6 21L8 14L3 9H9.5L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"4",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 8L14 12L12 16L10 12L12 8Z",fill:e})]}),SaoLuu:({color:e="#8e44ad"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M12 2L14.5 9H21L16 14L18 21L12 17L6 21L8 14L3 9H9.5L12 2Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"3",fill:e}),jsx("path",{d:"M12 9L13.5 12L12 15L10.5 12L12 9Z",fill:e})]}),DaiVan:({color:e="#34495e"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 6V12L16 16",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 2V4M4 12H2M12 20V22M20 12H22",stroke:e,strokeWidth:"2"})]}),BatTu:({color:e="#3498db"})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M12 2V22M2 12H22",stroke:e,strokeWidth:"2"}),jsx("path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:e,strokeWidth:"2"}),jsx("circle",{cx:"12",cy:"12",r:"2",fill:e})]}),PhiHoa:({type:e=0})=>{const n=PHIHOA_COLOR;return jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:n[e],strokeWidth:"2",fill:"white"}),jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:n[e],style:{font:"bold 13px sans-serif",userSelect:"none"},children:PHIHOA_SYMBOL1[e]})]})},NumberIcon:({color:e="#000000",number:n=1})=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("circle",{cx:"12",cy:"12",r:"10",stroke:e,strokeWidth:"2",fill:"white"}),jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:e,style:{font:"bold 13px sans-serif",userSelect:"none"},children:n})]})},CONFIG_COLORS={sex:["#3498db","#e91e63"],showSun:["#95a5a6","#f1c40f"],tuanHoanZone:["#95a5a6","#3498db"],rotateZone:["#95a5a6","#9b59b6"],locKiToanDo:["#95a5a6","#e67e22"],dvStar:["#95a5a6","#34495e"],batTuCung:["#95a5a6","#3498db"]},ConfigIcons=forwardRef((({cfgLs:e,onConfigChange:n,sex:s,onSexChange:a,dateTimeBorn:t,dateTimeView:o,onDateChange:l,ls:i},r)=>{const[c,d]=useState({dateTimeBorn:t,dateTimeView:o});useEffect((()=>{d({dateTimeBorn:t,dateTimeView:o})}),[t,o]);const m=[{id:"sex",icon:jsx("span",1===s?{className:"material-symbols-rounded",children:"male"}:{className:"material-symbols-rounded",children:"female"}),title:"Giới tính",options:[{value:1,label:"Nam",color:CONFIG_COLORS.sex[0],icon:jsx("span",{className:"material-symbols-rounded",children:"male"})},{value:0,label:"Nữ",color:CONFIG_COLORS.sex[1],icon:jsx("span",{className:"material-symbols-rounded",children:"female"})}],current:s},{id:"dateTimeBorn",icon:jsx("span",{className:"material-symbols-rounded",children:"calendar_month"}),title:"Năm sinh",isDateTime:!0,value:t,color:"#2ecc71"},{id:"dateTimeView",icon:jsx("span",{className:"material-symbols-rounded",children:"schedule"}),title:"Năm xem",isDateTime:!0,value:o,color:"#9b59b6"},{id:CfgValue.showSun,icon:jsx("span",{className:"material-symbols-rounded",children:"wb_sunny"}),title:"Hiện dương lịch",options:[{value:0,label:"Không hiện",color:CONFIG_COLORS.showSun[0],icon:jsx("span",{className:"material-symbols-rounded",children:"visibility_off"})},{value:1,label:"Hiện",color:CONFIG_COLORS.showSun[1],icon:jsx("span",{className:"material-symbols-rounded",children:"visibility"})}]},{id:CfgValue.typeLs,icon:jsx("span",{className:"material-symbols-rounded",children:"auto_stories"}),title:"Chọn kiểu lá số",options:typeLsName.map(((e,n)=>({value:n,label:e,color:typeLsColor[n],icon:jsx("span",{className:"material-symbols-rounded",children:"auto_stories"})})))},{id:CfgValue.tcpb,icon:jsx("span",{className:"material-symbols-rounded",children:"view_timeline"}),title:"Bàn Trung Châu",hidden:![6,7,8].includes(e[CfgValue.typeLs]),options:typeBanTCP.map(((e,n)=>({value:n,label:e,color:typeBanTCP_Color[n],icon:jsx("span",{className:"material-symbols-rounded",children:"view_timeline"}),description:0===n?"Hiển thị các sao trên Thiên Bàn":1===n?"Hiển thị các cung trên Địa Bàn":"Hiển thị các yếu tố trên Nhân Bàn"})))},{id:CfgValue.typePhiHoa,icon:n=>jsx(Icons.PhiHoa,{type:e[CfgValue.typePhiHoa]}),title:"Kiểu phi hóa",options:[{value:0,label:"Hóa Lộc",color:PHIHOA_COLOR[0],icon:()=>jsx(Icons.PhiHoa,{type:0})},{value:1,label:"Hóa Quyền",color:PHIHOA_COLOR[1],icon:()=>jsx(Icons.PhiHoa,{type:1})},{value:2,label:"Hóa Khoa",color:PHIHOA_COLOR[2],icon:()=>jsx(Icons.PhiHoa,{type:2})},{value:3,label:"Hóa Kị",color:PHIHOA_COLOR[3],icon:()=>jsx(Icons.PhiHoa,{type:3})}]},{id:CfgValue.lsCanType,icon:jsx("span",{className:"material-symbols-rounded",children:"view_module"}),title:"Chọn bảng tứ hóa",options:changeCanTypeMsg.map(((e,n)=>({value:n,label:e,color:typeLsColor[n],icon:jsx("span",{className:"material-symbols-rounded",children:"view_module"})})))},{id:CfgValue.showHoaIcon,icon:n=>{const s=e[CfgValue.showHoaIcon];return jsx(Icons.NumberIcon,{color:n,number:s+1})},title:"Hiện các tầng phi hóa",options:levelPhiHoaMsg.map(((e,n)=>({value:n,label:e,color:typeLsColor[n],icon:e=>jsx(Icons.NumberIcon,{color:e,number:n+1})})))},{id:CfgValue.tuanHoanZone,icon:jsx("span",{className:"material-symbols-rounded",children:"loop"}),title:"Tuần hoàn lộc kị",options:[{value:0,label:"Không hiện",color:typeLsColor[4],icon:jsx("span",{className:"material-symbols-rounded",children:"sync_disabled"})},{value:1,label:"Hiện",color:typeLsColor[5],icon:jsx("span",{className:"material-symbols-rounded",children:"loop"})}]},{id:CfgValue.rotateZone,icon:jsx("span",{className:"material-symbols-rounded",children:"rotate_90_degrees_ccw"}),title:"Cung vị trùng điệp",options:[{value:0,label:"Không hiện",color:typeLsColor[4],icon:jsx("span",{className:"material-symbols-rounded",children:"block"})},{value:1,label:"Hiện",color:typeLsColor[5],icon:jsx("span",{className:"material-symbols-rounded",children:"rotate_90_degrees_ccw"})}]},{id:CfgValue.locKiToanDo,icon:jsx("span",{className:"material-symbols-rounded",children:"star_rate"}),title:"Phương viên lộc kị toàn đồ",options:[{value:0,label:"Không hiện",color:typeLsColor[4],icon:jsx("span",{className:"material-symbols-rounded",children:"star_border"})},{value:1,label:"Hiện",color:typeLsColor[5],icon:jsx("span",{className:"material-symbols-rounded",children:"star_rate"})}]},{id:CfgValue.showHideStar,icon:jsx("span",{className:"material-symbols-rounded",children:"stars"}),title:"Hiện sao theo nhóm",options:hideStarMsg.map(((e,n)=>({value:n,label:e,color:typeLsColor[n],icon:jsx("span",{className:"material-symbols-rounded",children:"stars"})})))},{id:CfgValue.currentStar,icon:jsx("span",{className:"material-symbols-rounded",children:"auto_awesome_motion"}),title:"Hiện sao lưu",options:yearLoopStarMsg.map(((e,n)=>({value:n,label:e,color:typeLsColor[n],icon:jsx("span",{className:"material-symbols-rounded",children:"auto_awesome_motion"})})))},{id:CfgValue.dvStar,icon:jsx("span",{className:"material-symbols-rounded",children:"grade"}),title:"Sao lưu đại vận",options:[{value:0,label:"Không hiện",color:typeLsColor[4],icon:jsx("span",{className:"material-symbols-rounded",children:"star_outline"})},{value:1,label:"Hiện",color:typeLsColor[5],icon:jsx("span",{className:"material-symbols-rounded",children:"grade"})}]},{id:CfgValue.batTuCung,icon:jsx("span",{className:"material-symbols-rounded",children:"view_timeline"}),title:"Bát tự từng năm",options:[{value:0,label:"Không hiện",color:typeLsColor[4],icon:jsx("span",{className:"material-symbols-rounded",children:"block"})},{value:1,label:"Hiện",color:typeLsColor[5],icon:jsx("span",{className:"material-symbols-rounded",children:"view_timeline"})}]}],[h,u]=useState(null),[x,f]=useState({x:0,y:0}),[p,g]=useState(!1),[y,b]=useState(null),[j,w]=useState(!1),[v,L]=useState(!1);useImperativeHandle(r,(()=>({toggleMenu:()=>{g(!p),p&&(b(null),w(!1))}})));const C=()=>{L(!0),requestAnimationFrame((()=>{g(!1),L(!1),b(null)}))},k=useCallback((async(e,n)=>{const s=n.currentTarget.getBoundingClientRect();f({x:s.left+s.width/2,y:s.top-10});const a="string"==typeof e.id?e.id:Number(e.id);u(h===a?null:a),b(a)}),[h]),N=useCallback(((e,s)=>{"sex"===e.id?(a(s.value),u(null)):e.id===CfgValue.typeLs?(n(CfgValue.typeLs,s.value),u(null),[6,7,8].includes(s.value)?(w(!0),setTimeout((()=>{const e=document.querySelector(".options-panel");e&&(e.scrollTop=0)}),50)):w(!1)):e.id===CfgValue.tcpb?(n(CfgValue.tcpb,s.value),u(null)):(n(e.id,s.value),u(null))}),[n,a,l]),H=(e,n)=>{"dateTimeBorn"===e?(l(e,n),n.getTime()>o.getTime()&&l("dateTimeView",n),pushGTMData(i)):l(e,n)};return useCallback(((e,s)=>{n(e,s)}),[n]),useCallback((e=>{a(e)}),[a]),useCallback(((e,n)=>{l(e,n)}),[l]),jsxs(Fragment,{children:[jsx("style",{children:"\n          @keyframes swalShow {\n            from {\n              opacity: 0;\n              transform: scale(0.8);\n            }\n            to {\n              opacity: 1;\n              transform: scale(1);\n            }\n          }\n\n          @keyframes swalHide {\n            from {\n              opacity: 1;\n              transform: scale(1);\n            }\n            to {\n              opacity: 0;\n              transform: scale(0.8);\n            }\n          }\n\n          .swal-show-animation {\n            animation: swalShow 0.3s ease-out;\n          }\n\n          .swal-hide-animation {\n            animation: swalHide 0.2s ease-in forwards;\n          }\n\n          @keyframes scaleIn {\n            from { transform: scale(0.5); opacity: 0; }\n            to { transform: scale(1); opacity: 1; }\n          }\n\n          @keyframes slideIn {\n            from { transform: translateY(100%); }\n            to { transform: translateY(0); }\n          }\n\n          .floating-menu {\n            animation: scaleIn 0.2s ease-out;\n          }\n\n          .tool-options {\n            animation: slideIn 0.3s ease-out;\n          }\n\n          .speed-dial-icon {\n            transition: transform 0.3s ease;\n          }\n\n          .speed-dial-icon.open {\n            transform: rotate(45deg);\n          }\n\n          /* Safe areas for mobile */\n          .safe-area-top {\n            padding-top: env(safe-area-inset-top, 0px);\n          }\n          \n          .pb-safe {\n            padding-bottom: env(safe-area-inset-bottom, 16px);\n          }\n\n          @keyframes slideInRight {\n            from {\n              transform: translateX(100%);\n              opacity: 0;\n            }\n            to {\n              transform: translateX(0);\n              opacity: 1;\n            }\n          }\n\n          @keyframes slideOutRight {\n            from {\n              transform: translateX(0);\n              opacity: 1;\n            }\n            to {\n              transform: translateX(100%);\n              opacity: 0;\n            }\n          }\n\n          .slide-in {\n            animation: slideInRight 0.3s ease-out forwards;\n          }\n\n          .slide-out {\n            animation: slideOutRight 0.3s ease-out forwards;\n          }\n\n          @keyframes fadeIn {\n            from {\n              opacity: 0;\n            }\n            to {\n              opacity: 1;\n            }\n          }\n\n          @keyframes fadeOut {\n            from {\n              opacity: 1;\n            }\n            to {\n              opacity: 0;\n            }\n          }\n\n          .fade-in {\n            animation: fadeIn 0.3s ease-out forwards;\n          }\n\n          .fade-out {\n            animation: fadeOut 0.3s ease-out forwards;\n          }\n\n          .slide-in, .slide-out {\n            will-change: transform;\n          }\n          \n          .fade-in, .fade-out {\n            will-change: opacity; \n          }\n\n          .slide-in {\n            transform: translate3d(0, 0, 0);\n          }\n          \n          .slide-out {\n            transform: translate3d(100%, 0, 0);\n          }\n\n          /* Thêm hardware acceleration cho animations */\n          .slide-in,\n          .slide-out,\n          .fade-in,\n          .fade-out {\n            will-change: transform, opacity;\n            backface-visibility: hidden;\n            transform: translateZ(0);\n          }\n\n          /* Giảm thời gian animation xuống để mượt hơn */\n          .slide-in {\n            animation: slideInRight 0.2s ease-out forwards;\n          }\n\n          .slide-out { \n            animation: slideOutRight 0.2s ease-out forwards;\n          }\n\n          .fade-in {\n            animation: fadeIn 0.2s ease-out forwards;\n          }\n\n          .fade-out {\n            animation: fadeOut 0.2s ease-out forwards;\n          }\n\n          /* Tối ưu transitions */\n          .transition-transform {\n            transition: transform 0.2s ease-out;\n          }\n\n          /* Tối ưu hover effects */\n          @media (hover: hover) {\n            .hover:bg-gray-100:hover {\n              background-color: rgba(243, 244, 246, 0.4);\n            }\n          }\n        "}),jsxs("div",{className:"fixed z-50 right-2 bottom-2",children:[jsx("button",{onClick:()=>{g(!p),p&&(b(null),w(!1))},className:"\n            w-14 h-14 rounded-full bg-white shadow-lg\n            flex items-center justify-center\n            hover:opacity-90 transition-all\n            focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2\n            overflow-hidden\n            relative z-50\n          ",children:jsx("img",{src:appleIcon.src,alt:"Settings",className:"w-full h-full object-cover"})}),jsxs("svg",{className:"absolute top-[-21px] left-[-22px]",width:"100",height:"100",viewBox:"0 0 100 100",children:[jsx("defs",{children:jsx("path",{id:"circlePath",d:"M 50, 50 m -35, 0 a 35,35 0 1,1 70,0 a 35,35 0 1,1 -70,0"})}),jsx("text",{fontSize:"14",fill:"orange",fontWeight:"bold",children:jsx("textPath",{href:"#circlePath",startOffset:"25%",textAnchor:"middle",children:"Sửa Lá Số"})})]})]}),(p||v)&&jsxs(Fragment,{children:[jsx("div",{className:`\n              fixed inset-0 z-50\n              ${v?"fade-out":"fade-in"}\n            `,onClick:C}),jsxs("div",{className:`\n              fixed top-0 right-0 w-full sm:w-[380px] h-screen \n              bg-white shadow-xl z-[60]\n              ${v?"slide-out":"slide-in"}\n            `,children:[jsx("div",{className:"safe-area-top bg-white"}),jsxs("div",{className:"sticky top-0 flex items-center justify-between px-4 py-2 border-b bg-white",children:[jsx("h3",{className:"text-lg font-medium",children:null!==y?m.find((e=>e.id===y))?.title:"Cấu hình lá số"}),jsx("button",null!==y?{onClick:()=>b(null),className:"p-2 hover:bg-gray-100 rounded-full",children:jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}:{onClick:C,className:"p-2 hover:bg-gray-100 rounded-xl bg-gray-200 leading-none",children:jsx("span",{className:"material-symbols-rounded font-bold leading-none",children:"close"})})]}),jsxs("div",{className:"relative h-[calc(100vh-64px)] overflow-hidden",children:[jsx("div",{className:`\n                absolute inset-0 overflow-y-auto pb-safe\n                transition-transform duration-300 ease-in-out\n                ${null===y?"translate-x-0":"-translate-x-full"}\n              `,children:jsx("div",{className:"divide-y",children:m.map((n=>{const s=!n.hidden,a=n.isDateTime?dayjs(n.value).format("YYYY/MM/DD HH:mm"):n.options?.find((s=>s.value===("sex"===n.id?n.current:e[n.id])))?.label;return s&&jsxs("button",{className:`\n                          w-full p-4 flex items-center gap-4\n                          hover:bg-gray-50 transition-colors\n                          ${n.isDateTime?"cursor-pointer":""}\n                        `,onClick:e=>{n.isDateTime?k(n,e):b(n.id)},children:[jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#e7e7e7] p-0 text-[#5e5e5e]",children:"function"==typeof n.icon?jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.icon(n.color||"#ffd641d9")}):n.icon}),jsxs("div",{className:"flex-1 text-left",children:[jsx("div",{className:"text-sm font-medium",children:n.title}),a&&jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:a})]}),jsx("span",{className:"material-symbols-rounded text-gray-400",children:"chevron_right"})]},n.id)}))})}),jsx("div",{className:`\n                absolute inset-0 overflow-y-auto pb-safe bg-white options-panel\n                transition-transform duration-300 ease-in-out\n                ${null!==y?"translate-x-0":"translate-x-full"}\n              `,children:null!==y&&m.map((n=>{const a="string"==typeof n.id?n.id:Number(n.id);if(y===a){if(n.isDateTime){const e="dateTimeBorn"===n.id,s=e?t:o;return jsx("div",{className:"p-4",children:jsxs("div",{className:"relative flex flex-col space-y-6",children:[jsxs("div",{className:"w-full flex justify-between items-start",children:[jsxs("div",{children:[jsx("div",{className:"text-lg font-medium mb-2",children:e?"Năm sinh":"Năm xem dương lịch"}),jsx("div",{className:"text-sm text-gray-500",children:dayjs(s).format(e?"dddd YYYY/MM/DD - HH:mm":"YYYY/MM/DD - HH")})]}),jsx("button",{onClick:()=>(e=>{const n=new Date;"dateTimeBorn"===e?(l(e,n),n.getTime()>o.getTime()&&l("dateTimeView",n)):"dateTimeView"===e&&(n.getTime()<t.getTime()?l(e,t):l(e,n))})(String(n.id)),className:"px-3 py-1.5 text-sm font-medium text-white bg-orange-500 \n                                    rounded-lg hover:bg-orange-600 transition-colors\n                                    active:scale-95 transform duration-100",children:"Đặt Lại"})]}),jsx(DateTimeInput,{typeInput:String(n.id),dateTime:s,onChange:H,minDate:e?void 0:t,_maxDate:e?void 0:dayjs(t).add(120,"year").toDate(),showMinute:e})]})},a)}return jsxs("div",{className:"relative h-full",children:[jsx("div",{className:`\n                          absolute inset-0 bg-white transition-transform duration-300\n                          ${j?"-translate-x-full":"translate-x-0"}\n                        `,children:jsx("div",{className:"p-4 space-y-3",children:n.options?.map((a=>{const t="sex"===n.id?s===a.value:e[n.id]===a.value;return jsxs("button",{className:`\n                                    w-full p-4 rounded-lg transition-all \n                                    flex items-center justify-between gap-3\n                                    relative\n                                    ${t?"\n                                      ring-2 ring-offset-2 ring-orange-400 \n                                      shadow-lg scale-[1.02]\n                                      z-10\n                                    ":"\n                                      hover:bg-opacity-90\n                                      active:scale-[0.98]\n                                      opacity-70\n                                    "}\n                                  `,style:{backgroundColor:a.color,transform:t?"scale(1.02)":"scale(1)"},onClick:e=>{e.stopPropagation(),N(n,a)},children:[jsxs("div",{className:"flex items-center gap-3 flex-1",children:[jsx("div",{className:`\n                                      w-10 h-10 rounded-full \n                                      flex items-center justify-center\n                                      bg-white/20 backdrop-blur-sm\n                                      ${t?"bg-white/30":""}\n                                    `,children:"function"==typeof a.icon?a.icon(a.color):a.icon}),jsxs("div",{className:"flex flex-col items-start",children:[jsx("span",{className:`\n                                        text-base font-medium text-white\n                                        ${t?"font-semibold":""}\n                                      `,children:a.label}),a.description&&jsx("span",{className:"text-sm text-white/80",children:a.description})]})]}),t&&jsx("span",{className:"material-symbols-rounded text-white",children:"check_circle"})]},a.value)}))})}),[6,7,8].includes(e[CfgValue.typeLs])&&jsxs("div",{className:`\n                            absolute inset-0 bg-white transition-transform duration-300\n                            ${j?"translate-x-0":"translate-x-full"}\n                          `,children:[jsxs("div",{className:"sticky top-0 flex items-center gap-2 p-4 border-b bg-white",children:[jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),jsx("h3",{className:"text-lg font-medium",children:"Quay lại loại lá số khác "})]}),jsx("div",{className:"p-4 space-y-3",children:m.find((e=>e.id===CfgValue.tcpb))?.options?.map((n=>{const s=e[CfgValue.tcpb]===n.value;return jsxs("button",{className:`\n                                      w-full p-4 rounded-lg transition-all \n                                      flex items-center justify-between gap-3\n                                      relative\n                                      ${s?"\n                                        ring-2 ring-offset-2 ring-orange-400 \n                                        shadow-lg scale-[1.02]\n                                        z-10\n                                      ":"\n                                        hover:bg-opacity-90\n                                        active:scale-[0.98]\n                                        opacity-70\n                                      "}\n                                    `,style:{backgroundColor:n.color,transform:s?"scale(1.02)":"scale(1)"},onClick:e=>{e.stopPropagation(),N(m.find((e=>e.id===CfgValue.tcpb)),n)},children:[jsxs("div",{className:"flex items-center gap-3 flex-1",children:[jsx("div",{className:`\n                                        w-10 h-10 rounded-full \n                                        flex items-center justify-center\n                                        bg-white/20 backdrop-blur-sm\n                                        ${s?"bg-white/30":""}\n                                      `,children:"function"==typeof n.icon?n.icon(n.color):n.icon}),jsxs("div",{className:"flex flex-col items-start",children:[jsx("span",{className:`\n                                        text-base font-medium text-white\n                                        ${s?"font-semibold":""}\n                                      `,children:n.label}),n.description&&jsx("span",{className:"text-sm text-white/80",children:n.description})]})]}),s&&jsx("span",{className:"material-symbols-rounded text-white",children:"check_circle"})]},n.value)}))})]})]},a)}return null}))})]})]})]})]})}));ConfigIcons.displayName="ConfigIcons";export{ConfigIcons as default};