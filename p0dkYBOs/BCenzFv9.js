import{Traverse}from"neotraverse/modern";import pLimit from"p-limit";import{r as removeBase,i as isRemotePath,V as VALID_INPUT_FORMATS,A as AstroError,U as UnknownContentCollectionError,p as prependForwardSlash}from"./DEWHgkAV.js";import{c as createComponent,f as renderUniqueStylesheet,g as renderScriptElement,h as createHeadAndContent,r as renderTemplate,a as renderComponent,u as unescapeHTML}from"./4CUkstck.js";import"kleur/colors";import*as devalue from"devalue";import{A as APP_BLOG,B as BLOG_BASE,T as TAG_BASE,d as cleanSlug,P as POST_PERMALINK_PATTERN,t as trimSlash}from"./SCgoB6l-.js";const CONTENT_IMAGE_FLAG="astroContentImageFlag",IMAGE_IMPORT_PREFIX="__ASTRO_IMAGE_";function imageSrcToImportId(t,e){if(t=removeBase(t,IMAGE_IMPORT_PREFIX),isRemotePath(t))return;const n=t.split(".").at(-1);if(!n||!VALID_INPUT_FORMATS.includes(n))return;const o=new URLSearchParams(CONTENT_IMAGE_FLAG);return e&&o.set("importer",e),`${t}?${o.toString()}`}class DataStore{_collections=new Map;constructor(){this._collections=new Map}get(t,e){return this._collections.get(t)?.get(String(e))}entries(t){return[...(this._collections.get(t)??new Map).entries()]}values(t){return[...(this._collections.get(t)??new Map).values()]}keys(t){return[...(this._collections.get(t)??new Map).keys()]}has(t,e){const n=this._collections.get(t);return!!n&&n.has(String(e))}hasCollection(t){return this._collections.has(t)}collections(){return this._collections}static async fromModule(){try{const t=await import("./BcEe_9wP.js");if(t.default instanceof Map)return DataStore.fromMap(t.default);const e=devalue.unflatten(t.default);return DataStore.fromMap(e)}catch{}return new DataStore}static async fromMap(t){const e=new DataStore;return e._collections=t,e}}function dataStoreSingleton(){let t;return{get:async()=>(t||(t=DataStore.fromModule()),t),set:e=>{t=e}}}const globalDataStore=dataStoreSingleton(),__vite_import_meta_env__={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://tinhmenhdo.github.io",SSR:!0};function createCollectionToGlobResultMap({globResult:t,contentDir:e}){const n={};for(const o in t){const a=o.replace(new RegExp(`^${e}`),"").split("/");if(a.length<=1)continue;const r=a[0];n[r]??={},n[r][o]=t[o]}return n}function createGetCollection({contentCollectionToEntryMap:t,dataCollectionToEntryMap:e,getRenderEntryImport:n,cacheEntriesByCollection:o}){return async function(a,r){const s="function"==typeof r,c=await globalDataStore.get();let i;if(a in t)i="content";else{if(!(a in e)){if(c.hasCollection(a)){const{default:t}=await import("./D9aVaOQr.js"),e=[];for(const n of c.values(a)){const o=updateImageReferencesInData(n.data,n.filePath,t),c={...n,data:o,collection:a};s&&!r(c)||e.push(c)}return e}return console.warn(`The collection ${JSON.stringify(a)} does not exist or is empty. Ensure a collection directory with this name exists.`),[]}i="data"}const l=Object.values("content"===i?t[a]:e[a]);let g=[];if(!Object.assign(__vite_import_meta_env__,{_:process.env._})?.DEV&&o.has(a))g=o.get(a);else{const t=pLimit(10);g=await Promise.all(l.map((e=>t((async()=>{const t=await e();return"content"===i?{id:t.id,slug:t.slug,body:t.body,collection:t.collection,data:t.data,render:async()=>render({collection:t.collection,id:t.id,renderEntryImport:await n(a,t.slug)})}:{id:t.id,collection:t.collection,data:t.data}}))))),o.set(a,g)}return s?g.filter(r):g.slice()}}function updateImageReferencesInData(t,e,n){return new Traverse(t).map((function(t,o){if("string"==typeof o&&o.startsWith(IMAGE_IMPORT_PREFIX)){const a=o.replace(IMAGE_IMPORT_PREFIX,""),r=imageSrcToImportId(a,e);if(!r)return void t.update(a);const s=n?.get(r);s?t.update(s):t.update(a)}}))}async function render({collection:t,id:e,renderEntryImport:n}){const o=new AstroError({...UnknownContentCollectionError,message:`Unexpected error while rendering ${String(t)} â†’ ${String(e)}.`});if("function"!=typeof n)throw o;const a=await n();if(null==a||"object"!=typeof a)throw o;const{default:r}=a;if(isPropagatedAssetsModule(r)){const{collectedStyles:t,collectedLinks:n,collectedScripts:a,getMod:s}=r;if("function"!=typeof s)throw o;const c=await s();if(null==c||"object"!=typeof c)throw o;return{Content:createComponent({factory(o,r,s){let i="",l="",g="";Array.isArray(t)&&(i=t.map((t=>renderUniqueStylesheet(o,{type:"inline",content:t}))).join("")),Array.isArray(n)&&(l=n.map((t=>renderUniqueStylesheet(o,{type:"external",src:prependForwardSlash(t)}))).join("")),Array.isArray(a)&&(g=a.map((t=>renderScriptElement(t))).join(""));let p=r;return e.endsWith("mdx")&&(p={components:c.components??{},...r}),createHeadAndContent(unescapeHTML(i+l+g),renderTemplate`${renderComponent(o,"Content",c.Content,p,s)}`)},propagation:"self"}),headings:c.getHeadings?.()??[],remarkPluginFrontmatter:c.frontmatter??{}}}if(a.Content&&"function"==typeof a.Content)return{Content:a.Content,headings:a.getHeadings?.()??[],remarkPluginFrontmatter:a.frontmatter??{}};throw o}function isPropagatedAssetsModule(t){return"object"==typeof t&&null!=t&&"__astroPropagation"in t}const contentDir="/src/content/",contentEntryGlob=Object.assign({"/src/content/post/gioi-thieu-ve-tu-vi.mdx":()=>import("./Bh5Qq1Ew.js"),"/src/content/post/huyen-hoc-tu-vi-va-phong-thuy-tong-quan.md":()=>import("./BuJP8L7X.js"),"/src/content/post/kinh-dich-cong-cu-tai-nguyen-hoc-va-ung-dung.md":()=>import("./CtHsBrFl.js"),"/src/content/post/kinh-dich-tong-quan-va-ung-dung-trong-cuoc-song.md":()=>import("./D9H9VHWv.js"),"/src/content/post/landing.md":()=>import("./ik1SJjbw.js"),"/src/content/post/phien-ban-cap-nhat.mdx":()=>import("./BX2XX0PV.js"),"/src/content/post/than-so-hoc.mdx":()=>import("./B1gFB6xi.js"),"/src/content/post/tu-vi-kinh-dich-tong-quan-va-cach-tinh-menh.mdx":()=>import("./BEc-EmLQ.js")}),contentCollectionToEntryMap=createCollectionToGlobResultMap({globResult:contentEntryGlob,contentDir:contentDir}),dataEntryGlob=Object.assign({}),dataCollectionToEntryMap=createCollectionToGlobResultMap({globResult:dataEntryGlob,contentDir:contentDir});createCollectionToGlobResultMap({globResult:{...contentEntryGlob,...dataEntryGlob},contentDir:contentDir});let lookupMap={};function createGlobLookup(t){return async(e,n)=>{const o=lookupMap[e]?.entries[n];if(o)return t[e][o]}}lookupMap={post:{type:"content",entries:{"gioi-thieu-ve-tu-vi":"/src/content/post/gioi-thieu-ve-tu-vi.mdx","huyen-hoc-tu-vi-va-phong-thuy-tong-quan":"/src/content/post/huyen-hoc-tu-vi-va-phong-thuy-tong-quan.md","kinh-dich-cong-cu-tai-nguyen-hoc-va-ung-dung":"/src/content/post/kinh-dich-cong-cu-tai-nguyen-hoc-va-ung-dung.md","kinh-dich-tong-quan-va-ung-dung-trong-cuoc-song":"/src/content/post/kinh-dich-tong-quan-va-ung-dung-trong-cuoc-song.md",landing:"/src/content/post/landing.md","phien-ban-cap-nhat":"/src/content/post/phien-ban-cap-nhat.mdx","than-so-hoc":"/src/content/post/than-so-hoc.mdx","tu-vi-kinh-dich-tong-quan-va-cach-tinh-menh":"/src/content/post/tu-vi-kinh-dich-tong-quan-va-cach-tinh-menh.mdx"}}},new Set(Object.keys(lookupMap));const renderEntryGlob=Object.assign({"/src/content/post/gioi-thieu-ve-tu-vi.mdx":()=>import("./CiHdeOAJ.js"),"/src/content/post/huyen-hoc-tu-vi-va-phong-thuy-tong-quan.md":()=>import("./DvY3I_bj.js"),"/src/content/post/kinh-dich-cong-cu-tai-nguyen-hoc-va-ung-dung.md":()=>import("./Bc7oN5VM.js"),"/src/content/post/kinh-dich-tong-quan-va-ung-dung-trong-cuoc-song.md":()=>import("./CHGGrddw.js"),"/src/content/post/landing.md":()=>import("./DULHzlky.js"),"/src/content/post/phien-ban-cap-nhat.mdx":()=>import("./BbyeW2Qn.js"),"/src/content/post/than-so-hoc.mdx":()=>import("./DY-Q-hDF.js"),"/src/content/post/tu-vi-kinh-dich-tong-quan-va-cach-tinh-menh.mdx":()=>import("./FZGCpbmx.js")}),collectionToRenderEntryMap=createCollectionToGlobResultMap({globResult:renderEntryGlob,contentDir:contentDir}),cacheEntriesByCollection=new Map,getCollection=createGetCollection({contentCollectionToEntryMap:contentCollectionToEntryMap,dataCollectionToEntryMap:dataCollectionToEntryMap,getRenderEntryImport:createGlobLookup(collectionToRenderEntryMap),cacheEntriesByCollection:cacheEntriesByCollection}),generatePermalink=async({id:t,slug:e,publishDate:n,category:o})=>{const a=String(n.getFullYear()).padStart(4,"0"),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),c=String(n.getHours()).padStart(2,"0"),i=String(n.getMinutes()).padStart(2,"0"),l=String(n.getSeconds()).padStart(2,"0");return POST_PERMALINK_PATTERN.replace("%slug%",e).replace("%id%",t).replace("%category%",o||"").replace("%year%",a).replace("%month%",r).replace("%day%",s).replace("%hour%",c).replace("%minute%",i).replace("%second%",l).split("/").map((t=>trimSlash(t))).filter((t=>!!t)).join("/")},getNormalizedPost=async t=>{const{id:e,slug:n="",data:o}=t,{Content:a,remarkPluginFrontmatter:r}=await t.render(),{publishDate:s=new Date,updateDate:c,title:i,excerpt:l,image:g,tags:p=[],category:u,author:d,draft:h=!1,metadata:m={}}=o,y=cleanSlug(n),f=new Date(s),P=c?new Date(c):void 0,S=u?{slug:cleanSlug(u),title:u}:void 0,b=p.map((t=>({slug:cleanSlug(t),title:t})));return{id:e,slug:y,permalink:await generatePermalink({id:e,slug:y,publishDate:f,category:S?.slug}),publishDate:f,updateDate:P,title:i,excerpt:l,image:g,category:S,tags:b,author:d,draft:h,metadata:m,Content:a,readingTime:r?.readingTime}},load=async function(){const t=(await getCollection("post")).map((async t=>await getNormalizedPost(t)));return(await Promise.all(t)).sort(((t,e)=>e.publishDate.valueOf()-t.publishDate.valueOf())).filter((t=>!t.draft))};let _posts;const blogListRobots=APP_BLOG.list.robots,blogPostRobots=APP_BLOG.post.robots,blogCategoryRobots=APP_BLOG.category.robots,blogTagRobots=APP_BLOG.tag.robots,blogPostsPerPage=APP_BLOG?.postsPerPage,fetchPosts=async()=>(_posts||(_posts=await load()),_posts),findPostsByIds=async t=>{if(!Array.isArray(t))return[];const e=await fetchPosts();return t.reduce((function(t,n){return e.some((function(e){return n===e.id&&t.push(e)})),t}),[])},getStaticPathsBlogList=async({paginate:t})=>t(await fetchPosts(),{params:{blog:BLOG_BASE||void 0},pageSize:blogPostsPerPage}),getStaticPathsBlogPost=async()=>(await fetchPosts()).flatMap((t=>({params:{blog:t.permalink},props:{post:t}}))),getStaticPathsBlogCategory=async({paginate:t})=>[],getStaticPathsBlogTag=async({paginate:t})=>{const e=await fetchPosts(),n={};return e.map((t=>{Array.isArray(t.tags)&&t.tags.map((t=>{n[t?.slug]=t}))})),Array.from(Object.keys(n)).flatMap((o=>t(e.filter((t=>Array.isArray(t.tags)&&t.tags.find((t=>t.slug===o)))),{params:{tag:o,blog:TAG_BASE||void 0},pageSize:blogPostsPerPage,props:{tag:n[o]}})))};async function getRelatedPosts(t,e=4){const n=await fetchPosts(),o=new Set(t.tags?t.tags.map((t=>t.slug)):[]),a=n.reduce(((e,n)=>{if(n.slug===t.slug)return e;let a=0;return n.category&&t.category&&n.category.slug===t.category.slug&&(a+=5),n.tags&&n.tags.forEach((t=>{o.has(t.slug)&&(a+=1)})),e.push({post:n,score:a}),e}),[]);a.sort(((t,e)=>e.score-t.score));const r=[];let s=0;for(;r.length<e&&s<a.length;)r.push(a[s].post),s++;return r}export{blogTagRobots as a,blogCategoryRobots as b,getStaticPathsBlogTag as c,getStaticPathsBlogList as d,blogListRobots as e,fetchPosts as f,getStaticPathsBlogCategory as g,findPostsByIds as h,getRelatedPosts as i,blogPostRobots as j,getStaticPathsBlogPost as k};