import{i as isRemotePath,D as DEFAULT_HASH_PROPS,j as VALID_SUPPORTED_FORMATS,k as DEFAULT_OUTPUT_FORMAT,l as joinPaths}from"./6Pp62McA.js";import{A as AstroError,E as ExpectedImage,L as LocalImageUsedWrongly,M as MissingImageDimension,x as UnsupportedImageFormat,I as IncompatibleDescriptorOptions,y as UnsupportedImageConversion,z as NoImageMetadata,B as FailedToFetchRemoteImageDimensions,C as ExpectedImageOptions,D as ExpectedNotESMImage,G as InvalidImageService,H as toStyleString,e as createAstro,c as createComponent,J as ImageMissingAlt,r as renderTemplate,m as maybeRenderHead,b as addAttribute,s as spreadAttributes}from"./DKCB-3d1.js";import*as mime from"mrmime";import"clsx";const DEFAULT_RESOLUTIONS=[640,750,828,960,1080,1280,1668,1920,2048,2560,3200,3840,4480,5120,6016],LIMITED_RESOLUTIONS=[640,750,828,1080,1280,1668,2048,2560],getWidths=({width:t,layout:e,breakpoints:i=DEFAULT_RESOLUTIONS,originalWidth:r})=>{const a=t=>!r||t<=r;if("full-width"===e)return i.filter(a);if(!t)return[];const n=2*t,s=r?Math.min(n,r):n;return"fixed"===e?r&&t>r?[r]:[t,s]:"responsive"===e?[t,n,...i].filter((t=>t<=s)).sort(((t,e)=>t-e)):[]},getSizesAttribute=({width:t,layout:e})=>{if(t&&e)switch(e){case"responsive":return`(min-width: ${t}px) ${t}px, 100vw`;case"fixed":return`${t}px`;case"full-width":return"100vw";default:return}};function isESMImportedImage(t){return"object"==typeof t||"function"==typeof t&&"src"in t}function isRemoteImage(t){return"string"==typeof t}async function resolveSrc(t){return"object"==typeof t&&"then"in t?(await t).default??await t:t}function matchPattern(t,e){return matchProtocol(t,e.protocol)&&matchHostname(t,e.hostname,!0)&&matchPort(t,e.port)&&matchPathname(t,e.pathname)}function matchPort(t,e){return!e||e===t.port}function matchProtocol(t,e){return!e||e===t.protocol.slice(0,-1)}function matchHostname(t,e,i){if(!e)return!0;if(!i||!e.startsWith("*"))return e===t.hostname;if(e.startsWith("**.")){const i=e.slice(2);return i!==t.hostname&&t.hostname.endsWith(i)}if(e.startsWith("*.")){const i=e.slice(1);return 1===t.hostname.replace(i,"").split(".").filter(Boolean).length}return!1}function matchPathname(t,e,i){if(!e)return!0;if(!e.endsWith("*"))return e===t.pathname;if(e.endsWith("/**")){const i=e.slice(0,-2);return i!==t.pathname&&t.pathname.startsWith(i)}if(e.endsWith("/*")){const i=e.slice(0,-1);return 1===t.pathname.replace(i,"").split("/").filter(Boolean).length}return!1}function isRemoteAllowed(t,{domains:e=[],remotePatterns:i=[]}){if(!isRemotePath(t))return!1;const r=new URL(t);return e.some((t=>matchHostname(r,t)))||i.some((t=>matchPattern(r,t)))}function isLocalService(t){return!!t&&"transform"in t}function parseQuality(t){let e=parseInt(t);return Number.isNaN(e)?t:e}const sortNumeric=(t,e)=>t-e,baseService={propertiesToHash:DEFAULT_HASH_PROPS,validateOptions(t){if(!t.src||!isRemoteImage(t.src)&&!isESMImportedImage(t.src))throw new AstroError({...ExpectedImage,message:ExpectedImage.message(JSON.stringify(t.src),typeof t.src,JSON.stringify(t,((t,e)=>void 0===e?null:e)))});if(isESMImportedImage(t.src)){if(!VALID_SUPPORTED_FORMATS.includes(t.src.format))throw new AstroError({...UnsupportedImageFormat,message:UnsupportedImageFormat.message(t.src.format,t.src.src,VALID_SUPPORTED_FORMATS)});if(t.widths&&t.densities)throw new AstroError(IncompatibleDescriptorOptions);if("svg"===t.src.format&&(t.format="svg"),"svg"===t.src.format&&"svg"!==t.format||"svg"!==t.src.format&&"svg"===t.format)throw new AstroError(UnsupportedImageConversion)}else{if(t.src.startsWith("/@fs/")||!isRemotePath(t.src)&&!t.src.startsWith("/"))throw new AstroError({...LocalImageUsedWrongly,message:LocalImageUsedWrongly.message(t.src)});let e;if(t.width||t.height?!t.width&&t.height?e="width":t.width&&!t.height&&(e="height"):e="both",e)throw new AstroError({...MissingImageDimension,message:MissingImageDimension.message(e,t.src)})}return t.format||(t.format=DEFAULT_OUTPUT_FORMAT),t.width&&(t.width=Math.round(t.width)),t.height&&(t.height=Math.round(t.height)),t.layout&&t.width&&t.height&&(t.fit??="cover",delete t.layout),"none"===t.fit&&delete t.fit,t},getHTMLAttributes(t){const{targetWidth:e,targetHeight:i}=getTargetDimensions(t),{src:r,width:a,height:n,format:s,quality:o,densities:c,widths:d,formats:h,layout:g,priority:l,fit:m,position:f,...u}=t;return{...u,width:e,height:i,loading:u.loading??"lazy",decoding:u.decoding??"async"}},getSrcSet(t){const{targetWidth:e,targetHeight:i}=getTargetDimensions(t),r=e/i,{widths:a,densities:n}=t,s=t.format??DEFAULT_OUTPUT_FORMAT;let o=(a??[]).sort(sortNumeric),c=t.width,d=1/0;isESMImportedImage(t.src)&&(c=t.src.width,d=c,o.length>0&&o.at(-1)>d&&(o=o.filter((t=>t<=d)),o.push(d))),o=Array.from(new Set(o));const{width:h,height:g,...l}=t;let m=[];if(n){const t=n.map((t=>"number"==typeof t?t:parseFloat(t)));m=t.sort(sortNumeric).map((t=>Math.round(e*t))).map(((e,i)=>({width:e,descriptor:`${t[i]}x`})))}else o.length>0&&(m=o.map((t=>({width:t,descriptor:`${t}w`}))));return m.map((({width:t,descriptor:e})=>{const i=Math.round(t/r);return{transform:{...l,width:t,height:i},descriptor:e,attributes:{type:`image/${s}`}}}))},getURL(t,e){const i=new URLSearchParams;if(isESMImportedImage(t.src))i.append("href",t.src.src);else{if(!isRemoteAllowed(t.src,e))return t.src;i.append("href",t.src)}Object.entries({w:"width",h:"height",q:"quality",f:"format",fit:"fit",position:"position"}).forEach((([e,r])=>{t[r]&&i.append(e,t[r].toString())}));return`${joinPaths("/",e.endpoint.route)}?${i}`},parseURL(t){const e=t.searchParams;if(!e.has("href"))return;return{src:e.get("href"),width:e.has("w")?parseInt(e.get("w")):void 0,height:e.has("h")?parseInt(e.get("h")):void 0,format:e.get("f"),quality:e.get("q"),fit:e.get("fit"),position:e.get("position")??void 0}}};function getTargetDimensions(t){let e=t.width,i=t.height;if(isESMImportedImage(t.src)){const r=t.src.width/t.src.height;i&&!e?e=Math.round(i*r):e&&!i?i=Math.round(e/r):e||i||(e=t.src.width,i=t.src.height)}return{targetWidth:e,targetHeight:i}}function isImageMetadata(t){return t.fsPath&&!("fsPath"in t)}const decoder=new TextDecoder,toUTF8String=(t,e=0,i=t.length)=>decoder.decode(t.slice(e,i)),toHexString=(t,e=0,i=t.length)=>t.slice(e,i).reduce(((t,e)=>t+("0"+e.toString(16)).slice(-2)),""),readInt16LE=(t,e=0)=>{const i=t[e]+256*t[e+1];return i|131070*(32768&i)},readUInt16BE=(t,e=0)=>256*t[e]+t[e+1],readUInt16LE=(t,e=0)=>t[e]+256*t[e+1],readUInt24LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2],readInt32LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+(t[e+3]<<24),readUInt32BE=(t,e=0)=>t[e]*2**24+65536*t[e+1]+256*t[e+2]+t[e+3],readUInt32LE=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+t[e+3]*2**24,methods={readUInt16BE:readUInt16BE,readUInt16LE:readUInt16LE,readUInt32BE:readUInt32BE,readUInt32LE:readUInt32LE};function readUInt(t,e,i,r){i=i||0;return methods["readUInt"+e+(r?"BE":"LE")](t,i)}function readBox(t,e){if(t.length-e<4)return;const i=readUInt32BE(t,e);return t.length-e<i?void 0:{name:toUTF8String(t,4+e,8+e),offset:e,size:i}}function findBox(t,e,i){for(;i<t.length;){const r=readBox(t,i);if(!r)break;if(r.name===e)return r;i+=r.size}}const BMP={validate:t=>"BM"===toUTF8String(t,0,2),calculate:t=>({height:Math.abs(readInt32LE(t,22)),width:readUInt32LE(t,18)})},TYPE_ICON=1,SIZE_HEADER$1=6,SIZE_IMAGE_ENTRY=16;function getSizeFromOffset(t,e){const i=t[e];return 0===i?256:i}function getImageSize$1(t,e){const i=6+16*e;return{height:getSizeFromOffset(t,i+1),width:getSizeFromOffset(t,i)}}const ICO={validate(t){const e=readUInt16LE(t,0),i=readUInt16LE(t,4);if(0!==e||0===i)return!1;return 1===readUInt16LE(t,2)},calculate(t){const e=readUInt16LE(t,4),i=getImageSize$1(t,0);if(1===e)return i;const r=[i];for(let i=1;i<e;i+=1)r.push(getImageSize$1(t,i));return{height:i.height,images:r,width:i.width}}},TYPE_CURSOR=2,CUR={validate(t){const e=readUInt16LE(t,0),i=readUInt16LE(t,4);if(0!==e||0===i)return!1;return 2===readUInt16LE(t,2)},calculate:t=>ICO.calculate(t)},DDS={validate:t=>542327876===readUInt32LE(t,0),calculate:t=>({height:readUInt32LE(t,12),width:readUInt32LE(t,16)})},gifRegexp=/^GIF8[79]a/,GIF={validate:t=>gifRegexp.test(toUTF8String(t,0,6)),calculate:t=>({height:readUInt16LE(t,8),width:readUInt16LE(t,6)})},brandMap={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};function detectBrands(t,e,i){let r={};for(let a=e;a<=i;a+=4){const e=toUTF8String(t,a,a+4);e in brandMap&&(r[e]=1)}return"avif"in r?"avif":"heic"in r||"heix"in r||"hevc"in r||"hevx"in r?"heic":"mif1"in r||"msf1"in r?"heif":void 0}const HEIF={validate(t){const e=toUTF8String(t,4,8),i=toUTF8String(t,8,12);return"ftyp"===e&&i in brandMap},calculate(t){const e=findBox(t,"meta",0),i=e&&findBox(t,"iprp",e.offset+12),r=i&&findBox(t,"ipco",i.offset+8),a=r&&findBox(t,"ispe",r.offset+8);if(a)return{height:readUInt32BE(t,a.offset+16),width:readUInt32BE(t,a.offset+12),type:detectBrands(t,8,e.offset)};throw new TypeError("Invalid HEIF, no size found")}},SIZE_HEADER=8,FILE_LENGTH_OFFSET=4,ENTRY_LENGTH_OFFSET=4,ICON_TYPE_SIZE={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function readImageHeader(t,e){const i=e+4;return[toUTF8String(t,e,i),readUInt32BE(t,i)]}function getImageSize(t){const e=ICON_TYPE_SIZE[t];return{width:e,height:e,type:t}}const ICNS={validate:t=>"icns"===toUTF8String(t,0,4),calculate(t){const e=t.length,i=readUInt32BE(t,4);let r=8,a=readImageHeader(t,r),n=getImageSize(a[0]);if(r+=a[1],r===i)return n;const s={height:n.height,images:[n],width:n.width};for(;r<i&&r<e;)a=readImageHeader(t,r),n=getImageSize(a[0]),r+=a[1],s.images.push(n);return s}},J2C={validate:t=>"ff4fff51"===toHexString(t,0,4),calculate:t=>({height:readUInt32BE(t,12),width:readUInt32BE(t,8)})},JP2={validate(t){if(1783636e3!==readUInt32BE(t,4)||readUInt32BE(t,0)<1)return!1;const e=findBox(t,"ftyp",0);return!!e&&1718909296===readUInt32BE(t,e.offset+4)},calculate(t){const e=findBox(t,"jp2h",0),i=e&&findBox(t,"ihdr",e.offset+8);if(i)return{height:readUInt32BE(t,i.offset+8),width:readUInt32BE(t,i.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},EXIF_MARKER="45786966",APP1_DATA_SIZE_BYTES=2,EXIF_HEADER_BYTES=6,TIFF_BYTE_ALIGN_BYTES=2,BIG_ENDIAN_BYTE_ALIGN="4d4d",LITTLE_ENDIAN_BYTE_ALIGN="4949",IDF_ENTRY_BYTES=12,NUM_DIRECTORY_ENTRIES_BYTES=2;function isEXIF(t){return"45786966"===toHexString(t,2,6)}function extractSize(t,e){return{height:readUInt16BE(t,e),width:readUInt16BE(t,e+2)}}function extractOrientation(t,e){const i=readUInt(t,16,14,e);for(let r=0;r<i;r++){const i=16+12*r,a=i+12;if(i>t.length)return;const n=t.slice(i,a);if(274===readUInt(n,16,0,e)){if(3!==readUInt(n,16,2,e))return;if(1!==readUInt(n,32,4,e))return;return readUInt(n,16,8,e)}}}function validateExifBlock(t,e){const i=t.slice(2,e),r=toHexString(i,6,8),a="4d4d"===r;if(a||"4949"===r)return extractOrientation(i,a)}function validateInput(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}const JPG={validate:t=>"ffd8"===toHexString(t,0,2),calculate(t){let e,i;for(t=t.slice(4);t.length;){const r=readUInt16BE(t,0);if(255===t[r]){if(isEXIF(t)&&(e=validateExifBlock(t,r)),validateInput(t,r),i=t[r+1],192===i||193===i||194===i){const i=extractSize(t,r+5);return e?{height:i.height,orientation:e,width:i.width}:i}t=t.slice(r+2)}else t=t.slice(r)}throw new TypeError("Invalid JPG, no size found")}},KTX={validate:t=>{const e=toUTF8String(t,1,7);return["KTX 11","KTX 20"].includes(e)},calculate:t=>{const e=49===t[5]?"ktx":"ktx2",i="ktx"===e?36:20;return{height:readUInt32LE(t,i+4),width:readUInt32LE(t,i),type:e}}},pngSignature="PNG\r\n\n",pngImageHeaderChunkName="IHDR",pngFriedChunkName="CgBI",PNG={validate(t){if("PNG\r\n\n"===toUTF8String(t,1,8)){let e=toUTF8String(t,12,16);if("CgBI"===e&&(e=toUTF8String(t,28,32)),"IHDR"!==e)throw new TypeError("Invalid PNG");return!0}return!1},calculate:t=>"CgBI"===toUTF8String(t,12,16)?{height:readUInt32BE(t,36),width:readUInt32BE(t,32)}:{height:readUInt32BE(t,20),width:readUInt32BE(t,16)}},PNMTypes={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},handlers={default:t=>{let e=[];for(;t.length>0;){const i=t.shift();if("#"!==i[0]){e=i.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const i=t.shift();if(i.length>16||i.charCodeAt(0)>128)continue;const[r,a]=i.split(" ");if(r&&a&&(e[r.toLowerCase()]=parseInt(a,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}},PNM={validate:t=>toUTF8String(t,0,2)in PNMTypes,calculate(t){const e=toUTF8String(t,0,2),i=PNMTypes[e],r=toUTF8String(t,3).split(/[\r\n]+/);return(handlers[i]||handlers.default)(r)}},PSD={validate:t=>"8BPS"===toUTF8String(t,0,4),calculate:t=>({height:readUInt32BE(t,14),width:readUInt32BE(t,18)})},svgReg=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,extractorRegExps={height:/\sheight=(['"])([^%]+?)\1/,root:svgReg,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},INCH_CM=2.54,units={in:96,cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72,px:1},unitsReg=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(units).join("|")})?$`);function parseLength(t){const e=unitsReg.exec(t);if(e)return Math.round(Number(e[1])*(units[e[2]]||1))}function parseViewbox(t){const e=t.split(" ");return{height:parseLength(e[3]),width:parseLength(e[2])}}function parseAttributes(t){const e=extractorRegExps.width.exec(t),i=extractorRegExps.height.exec(t),r=extractorRegExps.viewbox.exec(t);return{height:i&&parseLength(i[2]),viewbox:r&&parseViewbox(r[2]),width:e&&parseLength(e[2])}}function calculateByDimensions(t){return{height:t.height,width:t.width}}function calculateByViewbox(t,e){const i=e.width/e.height;return t.width?{height:Math.floor(t.width/i),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*i)}:{height:e.height,width:e.width}}const SVG={validate:t=>svgReg.test(toUTF8String(t,0,1e3)),calculate(t){const e=extractorRegExps.root.exec(toUTF8String(t));if(e){const t=parseAttributes(e[0]);if(t.width&&t.height)return calculateByDimensions(t);if(t.viewbox)return calculateByViewbox(t,t.viewbox)}throw new TypeError("Invalid SVG")}},TGA={validate:t=>0===readUInt16LE(t,0)&&0===readUInt16LE(t,4),calculate:t=>({height:readUInt16LE(t,14),width:readUInt16LE(t,12)})};function readIFD(t,e){const i=readUInt(t,32,4,e);return t.slice(i+2)}function readValue(t,e){const i=readUInt(t,16,8,e);return(readUInt(t,16,10,e)<<16)+i}function nextTag(t){if(t.length>24)return t.slice(12)}function extractTags(t,e){const i={};let r=t;for(;r&&r.length;){const t=readUInt(r,16,0,e),a=readUInt(r,16,2,e),n=readUInt(r,32,4,e);if(0===t)break;1!==n||3!==a&&4!==a||(i[t]=readValue(r,e)),r=nextTag(r)}return i}function determineEndianness(t){const e=toUTF8String(t,0,2);return"II"===e?"LE":"MM"===e?"BE":void 0}const signatures=["49492a00","4d4d002a"],TIFF={validate:t=>signatures.includes(toHexString(t,0,4)),calculate(t){const e="BE"===determineEndianness(t),i=extractTags(readIFD(t,e),e),r=i[256],a=i[257];if(!r||!a)throw new TypeError("Invalid Tiff. Missing tags");return{height:a,width:r}}};function calculateExtended(t){return{height:1+readUInt24LE(t,7),width:1+readUInt24LE(t,4)}}function calculateLossless(t){return{height:1+((15&t[4])<<10|t[3]<<2|(192&t[2])>>6),width:1+((63&t[2])<<8|t[1])}}function calculateLossy(t){return{height:16383&readInt16LE(t,8),width:16383&readInt16LE(t,6)}}const WEBP={validate(t){const e="RIFF"===toUTF8String(t,0,4),i="WEBP"===toUTF8String(t,8,12),r="VP8"===toUTF8String(t,12,15);return e&&i&&r},calculate(t){const e=toUTF8String(t,12,16);if(t=t.slice(20,30),"VP8X"===e){const e=t[0];if(!(192&e)&&!(1&e))return calculateExtended(t);throw new TypeError("Invalid WebP")}if("VP8 "===e&&47!==t[0])return calculateLossy(t);const i=toHexString(t,3,6);if("VP8L"===e&&"9d012a"!==i)return calculateLossless(t);throw new TypeError("Invalid WebP")}},typeHandlers=new Map([["bmp",BMP],["cur",CUR],["dds",DDS],["gif",GIF],["heif",HEIF],["icns",ICNS],["ico",ICO],["j2c",J2C],["jp2",JP2],["jpg",JPG],["ktx",KTX],["png",PNG],["pnm",PNM],["psd",PSD],["svg",SVG],["tga",TGA],["tiff",TIFF],["webp",WEBP]]),types=Array.from(typeHandlers.keys()),firstBytes=new Map([[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);function detector(t){const e=t[0],i=firstBytes.get(e);return i&&typeHandlers.get(i).validate(t)?i:types.find((e=>typeHandlers.get(e).validate(t)))}const globalOptions={disabledTypes:[]};function lookup(t){const e=detector(t);if(void 0!==e){if(globalOptions.disabledTypes.includes(e))throw new TypeError("disabled file type: "+e);const i=typeHandlers.get(e).calculate(t);if(void 0!==i)return i.type=i.type??e,i}throw new TypeError("unsupported file type: "+e)}async function imageMetadata(t,e){try{const i=lookup(t);if(!i.height||!i.width||!i.type)throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(e)});const{width:r,height:a,type:n,orientation:s}=i,o=(s||0)>=5;return{width:o?a:r,height:o?r:a,format:n,orientation:s}}catch{throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(e)})}}async function inferRemoteSize(t){const e=await fetch(t);if(!e.body||!e.ok)throw new AstroError({...FailedToFetchRemoteImageDimensions,message:FailedToFetchRemoteImageDimensions.message(t)});const i=e.body.getReader();let r,a,n=new Uint8Array;for(;!r;){const e=await i.read();if(r=e.done,r)break;if(e.value){a=e.value;let r=new Uint8Array(n.length+a.length);r.set(n,0),r.set(a,n.length),n=r;try{const e=await imageMetadata(n,t);if(e)return await i.cancel(),e}catch{}}}throw new AstroError({...NoImageMetadata,message:NoImageMetadata.message(t)})}async function getConfiguredImageService(){if(!globalThis?.astroAsset?.imageService){const{default:t}=await import("./CZJAP9Gv.js").catch((t=>{const e=new AstroError(InvalidImageService);throw e.cause=t,e}));return globalThis.astroAsset||(globalThis.astroAsset={}),globalThis.astroAsset.imageService=t,t}return globalThis.astroAsset.imageService}async function getImage$1(t,e){if(!t||"object"!=typeof t)throw new AstroError({...ExpectedImageOptions,message:ExpectedImageOptions.message(JSON.stringify(t))});if(void 0===t.src)throw new AstroError({...ExpectedImage,message:ExpectedImage.message(t.src,"undefined",JSON.stringify(t))});if(isImageMetadata(t))throw new AstroError(ExpectedNotESMImage);const i=await getConfiguredImageService(),r={...t,src:await resolveSrc(t.src)};let a,n,s;if(t.inferSize&&isRemoteImage(r.src)&&isRemotePath(r.src)){const t=await inferRemoteSize(r.src);r.width??=t.width,r.height??=t.height,a=t.width,n=t.height,s=t.format,delete r.inferSize}const o=isESMImportedImage(r.src)?r.src.fsPath:void 0,c=isESMImportedImage(r.src)?r.src.clone??r.src:r.src;if(isESMImportedImage(c)&&(a=c.width,n=c.height,s=c.format),a&&n){const t=a/n;r.height&&!r.width?r.width=Math.round(r.height*t):r.width&&!r.height?r.height=Math.round(r.width/t):r.width||r.height||(r.width=a,r.height=n)}r.src=c;const d=t.layout??e.experimentalLayout;e.experimentalResponsiveImages&&d&&(r.widths||=getWidths({width:r.width,layout:d,originalWidth:a,breakpoints:e.experimentalBreakpoints?.length?e.experimentalBreakpoints:isLocalService(i)?LIMITED_RESOLUTIONS:DEFAULT_RESOLUTIONS}),r.sizes||=getSizesAttribute({width:r.width,layout:d}),r.priority?(r.loading??="eager",r.decoding??="sync",r.fetchpriority??="high"):(r.loading??="lazy",r.decoding??="async",r.fetchpriority??="auto"),delete r.priority,delete r.densities);const h=i.validateOptions?await i.validateOptions(r,e):r,g=i.getSrcSet?await i.getSrcSet(h,e):[];let l=await i.getURL(h,e);const m=t=>t.width===a&&t.height===n&&t.format===s;let f=await Promise.all(g.map((async t=>({transform:t.transform,url:m(t.transform)?l:await i.getURL(t.transform,e),descriptor:t.descriptor,attributes:t.attributes}))));if(isLocalService(i)&&globalThis.astroAsset.addStaticImage&&(!isRemoteImage(h.src)||l!==h.src)){const t=i.propertiesToHash??DEFAULT_HASH_PROPS;l=globalThis.astroAsset.addStaticImage(h,t,o),f=g.map((e=>({transform:e.transform,url:m(e.transform)?l:globalThis.astroAsset.addStaticImage(e.transform,t,o),descriptor:e.descriptor,attributes:e.attributes})))}return{rawOptions:r,options:h,src:l,srcSet:{values:f,attribute:f.map((t=>`${t.url} ${t.descriptor}`)).join(", ")},attributes:void 0!==i.getHTMLAttributes?await i.getHTMLAttributes(h,e):{}}}function addCSSVarsToStyle(t,e){const i=Object.entries(t).filter((([t,e])=>void 0!==e&&!1!==e)).map((([t,e])=>`--${t}: ${e};`)).join(" ");if(!e)return i;return`${i} ${"string"==typeof e?e:toStyleString(e)}`}const cssFitValues=["fill","contain","cover","scale-down"];function applyResponsiveAttributes({layout:t,image:e,props:i,additionalAttributes:r}){const a={...r,...e.attributes};return a.style=addCSSVarsToStyle({w:e.attributes.width??i.width??e.options.width,h:e.attributes.height??i.height??e.options.height,fit:cssFitValues.includes(i.fit??"")&&i.fit,pos:i.position},a.style),a["data-astro-image"]=t,a}const $$Astro$1=createAstro("https://tinhmenhdo.com"),$$Image=createComponent((async(t,e,i)=>{const r=t.createAstro($$Astro$1,e,i);r.self=$$Image;const a=r.props;if(void 0===a.alt||null===a.alt)throw new AstroError(ImageMissingAlt);"string"==typeof a.width&&(a.width=parseInt(a.width)),"string"==typeof a.height&&(a.height=parseInt(a.height));const n=a.layout??imageConfig.experimentalLayout??"none",s=imageConfig.experimentalResponsiveImages&&"none"!==n;s&&(a.layout??=imageConfig.experimentalLayout,a.fit??=imageConfig.experimentalObjectFit??"cover",a.position??=imageConfig.experimentalObjectPosition??"center");const o=await getImage(a),c={};o.srcSet.values.length>0&&(c.srcset=o.srcSet.attribute);const{class:d,...h}=s?applyResponsiveAttributes({layout:n,image:o,props:a,additionalAttributes:c}):{...c,...o.attributes};return renderTemplate`${maybeRenderHead()}<img${addAttribute(o.src,"src")}${spreadAttributes(h)}${addAttribute(d,"class")}>`}),"/root/code/tmd_astro/node_modules/astro/components/Image.astro",void 0),$$Astro=createAstro("https://tinhmenhdo.com"),$$Picture=createComponent((async(t,e,i)=>{const r=t.createAstro($$Astro,e,i);r.self=$$Picture;const a=["webp"],{formats:n=a,pictureAttributes:s={},fallbackFormat:o,...c}=r.props;if(void 0===c.alt||null===c.alt)throw new AstroError(ImageMissingAlt);const d=c.class?.match(/\bastro-\w{8}\b/)?.[0];d&&(s.class?s.class=`${s.class} ${d}`:s.class=d);const h=c.layout??imageConfig.experimentalLayout??"none",g=imageConfig.experimentalResponsiveImages&&"none"!==h;g&&(c.layout??=imageConfig.experimentalLayout,c.fit??=imageConfig.experimentalObjectFit??"cover",c.position??=imageConfig.experimentalObjectPosition??"center");for(const t in c)t.startsWith("data-astro-cid")&&(s[t]=c[t]);const l=await resolveSrc(c.src),m=await Promise.all(n.map((async t=>await getImage({...c,src:l,format:t,widths:c.widths,densities:c.densities}))));let f=o??"png";!o&&isESMImportedImage(l)&&["gif","svg","jpg","jpeg"].includes(l.format)&&(f=l.format);const u=await getImage({...c,format:f,widths:c.widths,densities:c.densities}),p={},I={};c.sizes&&(I.sizes=c.sizes),u.srcSet.values.length>0&&(p.srcset=u.srcSet.attribute);const{class:w,...E}=g?applyResponsiveAttributes({layout:h,image:u,props:c,additionalAttributes:p}):{...p,...u.attributes};return renderTemplate`${maybeRenderHead()}<picture${spreadAttributes(s)}> ${Object.entries(m).map((([t,e])=>{const i=c.densities||!c.densities&&!c.widths&&!g?`${e.src}${e.srcSet.values.length>0?", "+e.srcSet.attribute:""}`:e.srcSet.attribute;return renderTemplate`<source${addAttribute(i,"srcset")}${addAttribute(mime.lookup(e.options.format??e.src)??`image/${e.options.format}`,"type")}${spreadAttributes(I)}>`}))}  <img${addAttribute(u.src,"src")}${spreadAttributes(E)}${addAttribute(w,"class")}> </picture>`}),"/root/code/tmd_astro/node_modules/astro/components/Picture.astro",void 0),imageConfig={endpoint:{route:"/_image"},service:{entrypoint:"astro/assets/services/sharp",config:{}},domains:["cdn.pixabay.com"],remotePatterns:[],experimentalResponsiveImages:!0},getImage=async t=>await getImage$1(t,imageConfig),_astro_assets=Object.freeze(Object.defineProperty({__proto__:null,Image:$$Image,getConfiguredImageService:getConfiguredImageService,getImage:getImage,imageConfig:imageConfig,inferRemoteSize:inferRemoteSize,isLocalService:isLocalService},Symbol.toStringTag,{value:"Module"}));export{$$Image as $,_astro_assets as _,baseService as b,getImage as g,parseQuality as p};